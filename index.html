<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scapia FPL Weekly Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --scapia-orange: #FF6B35;
            --scapia-dark: #1A1A2E;
            --scapia-navy: #16213E;
            --scapia-accent: #0F3460;
            --scapia-gold: #FFD700;
            --scapia-silver: #C0C0C0;
            --scapia-bronze: #CD7F32;
            --success: #48bb78;
            --danger: #e53e3e;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--scapia-dark) 0%, var(--scapia-navy) 50%, var(--scapia-accent) 100%);
            min-height: 100vh;
            color: #fff;
            padding: 15px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--scapia-orange);
            text-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
        }
        
        .tagline {
            color: #a0aec0;
            font-style: italic;
            margin-top: 5px;
        }
        
        .gw-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            overflow-x: auto;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }
        
        .gw-btn {
            padding: 10px 18px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .gw-btn:hover {
            background: rgba(255, 107, 53, 0.2);
            transform: translateY(-2px);
        }
        
        .gw-btn.active {
            background: var(--scapia-orange);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }
        
        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 25px;
        }
        
        .tab {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: var(--scapia-orange);
            color: white;
        }
        
        .content {
            display: none;
        }
        
        .content.active {
            display: block;
        }
        
        .prize-card {
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.2), rgba(255, 107, 53, 0.1));
            border: 1px solid var(--scapia-orange);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .prize-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 107, 53, 0.1), transparent);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .spotlight-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 107, 53, 0.15));
            border: 2px solid var(--scapia-orange);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }
        
        .spotlight-title {
            font-size: 1.3rem;
            font-weight: 900;
            color: var(--scapia-orange);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .spotlight-emoji {
            font-size: 2rem;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .spotlight-story {
            font-size: 1rem;
            line-height: 1.6;
            color: #e0e0e0;
        }
        
        .highlight {
            color: var(--scapia-orange);
            font-weight: 700;
        }
        
        .pool-amount {
            font-size: 2.8rem;
            font-weight: 900;
            color: var(--scapia-orange);
            text-shadow: 0 0 25px rgba(255, 107, 53, 0.5);
        }
        
        .pool-info {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .info-item {
            text-align: center;
        }
        
        .info-value {
            font-size: 1.3rem;
            font-weight: 700;
        }
        
        .info-label {
            font-size: 0.8rem;
            color: #a0aec0;
        }
        
        .prizes {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .prize {
            text-align: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .prize-emoji {
            font-size: 1.5rem;
        }
        
        .prize-amount {
            font-weight: 700;
            margin-top: 5px;
        }
        
        .leaderboard {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 20px;
        }
        
        .player-row {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            transition: all 0.3s;
            position: relative;
        }
        
        .player-row:hover {
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.08);
        }
        
        .player-row.winner {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.2), rgba(255, 107, 53, 0.1));
            border-left: 3px solid var(--scapia-gold);
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.3); }
            50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); }
        }
        
        .trend-indicator {
            margin-left: 8px;
            font-size: 1rem;
            opacity: 0.7;
        }
        
        .trend-up { color: var(--success); }
        .trend-down { color: var(--danger); }
        .trend-same { color: #a0aec0; }
        
        .rank {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: 900;
            margin-right: 15px;
        }
        
        .rank-1 {
            background: linear-gradient(135deg, var(--scapia-gold), #ffed4e);
            color: #000;
        }
        
        .rank-2 {
            background: linear-gradient(135deg, var(--scapia-silver), #d7d7d7);
            color: #000;
        }
        
        .rank-3 {
            background: linear-gradient(135deg, var(--scapia-bronze), #e6ac79);
            color: #000;
        }
        
        .rank-other {
            background: rgba(255, 107, 53, 0.2);
            border: 1px solid var(--scapia-orange);
        }
        
        .player-info {
            flex: 1;
        }
        
        .player-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .player-captain {
            font-size: 0.8rem;
            color: #a0aec0;
        }
        
        .score-prize {
            text-align: right;
        }
        
        .score {
            font-size: 1.3rem;
            font-weight: 700;
        }
        
        .prize-won {
            color: var(--success);
            font-weight: 600;
        }
        
        .standing-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 18px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .standing-player {
            flex: 1;
        }
        
        .standing-name {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .standing-stats {
            font-size: 0.85rem;
            color: #a0aec0;
        }
        
        .standing-earnings {
            text-align: right;
        }
        
        .net-amount {
            font-size: 1.4rem;
            font-weight: 900;
        }
        
        .positive {
            color: var(--success);
        }
        
        .negative {
            color: var(--danger);
        }
        
        .badge-list {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-top: 8px;
        }
        
        .badge {
            padding: 3px 8px;
            background: rgba(255, 107, 53, 0.2);
            border: 1px solid var(--scapia-orange);
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .stats-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .stat-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--scapia-orange);
            margin-bottom: 15px;
        }
        
        .award {
            padding: 12px;
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(255, 107, 53, 0.05));
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .award:hover {
            transform: translateX(5px);
            border-left-color: var(--scapia-orange);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.2), rgba(255, 107, 53, 0.1));
        }
        
        .streak-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            background: linear-gradient(135deg, #ff6b35, #ff8c42);
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            color: #000;
            margin-left: 8px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .stat-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 5px;
        }
        
        .stat-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--scapia-orange), var(--scapia-gold));
            border-radius: 10px;
            transition: width 1s ease;
        }
        
        .award-info {
            flex: 1;
        }
        
        .award-title {
            font-weight: 700;
            color: var(--scapia-orange);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .award-desc {
            font-size: 0.85rem;
            color: #a0aec0;
            font-style: italic;
        }
        
        .player-story-card {
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(15, 52, 96, 0.2));
            border: 1px solid rgba(255, 107, 53, 0.3);
            border-radius: 15px;
            padding: 18px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        
        .player-story-card:hover {
            transform: translateY(-3px);
            border-color: var(--scapia-orange);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.2);
        }
        
        .story-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .story-player {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--scapia-orange);
        }
        
        .story-emoji {
            font-size: 1.5rem;
        }
        
        .story-text {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #e0e0e0;
            font-style: italic;
        }
        
        .award-winner {
            font-weight: 600;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">‚úàÔ∏è SCAPIA FPL</div>
            <div class="tagline">Where every gameweek is a new journey</div>
        </div>

        <div class="gw-selector">
            <button class="gw-btn" onclick="showGW(2)">GW 2</button>
            <button class="gw-btn" onclick="showGW(3)">GW 3</button>
            <button class="gw-btn" onclick="showGW(4)">GW 4</button>
            <button class="gw-btn" onclick="showGW(5)">GW 5</button>
            <button class="gw-btn" onclick="showGW(6)">GW 6</button>
            <button class="gw-btn" onclick="showGW(7)">GW 7</button>
            <button class="gw-btn" onclick="showGW(8)">GW 8</button>
            <button class="gw-btn active" onclick="showGW(9)">GW 9</button>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('battle')">‚öîÔ∏è Battle</button>
            <button class="tab" onclick="showTab('standings')">üèÜ Standings</button>
            <button class="tab" onclick="showTab('stats')">üìä Stats</button>
        </div>

        <!-- Battle Tab -->
        <div id="battle" class="content active">
            <div id="spotlight"></div>
            
            <div class="prize-card">
                <div class="pool-amount">‚Çπ<span id="poolAmount">1700</span></div>
                <div class="pool-info">
                    <div class="info-item">
                        <div class="info-value" id="playerCount">17</div>
                        <div class="info-label">Warriors</div>
                    </div>
                    <div class="info-item">
                        <div class="info-value">‚Çπ100</div>
                        <div class="info-label">Entry</div>
                    </div>
                    <div class="info-item">
                        <div class="info-value">GW<span id="currentGW">9</span></div>
                        <div class="info-label">Battle</div>
                    </div>
                </div>
                <div class="prizes" id="prizeList"></div>
            </div>
            <div class="leaderboard" id="leaderboard"></div>
        </div>

        <!-- Standings Tab -->
        <div id="standings" class="content">
            <div id="standingsList"></div>
        </div>

        <!-- Stats Tab -->
        <div id="stats" class="content">
            <div class="stats-section">
                <div class="stat-title">üìñ Player Stories</div>
                <div id="playerStories"></div>
            </div>
            <div class="stats-section">
                <div class="stat-title">üèÜ Performance Awards</div>
                <div id="performanceAwards"></div>
            </div>
            <div class="stats-section">
                <div class="stat-title">üòÇ Hall of Fame & Shame</div>
                <div id="funAwards"></div>
            </div>
        </div>
    </div>

    <script>
        // Complete game data
        const gameData = {
            2: {
                players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Raghu', 'Mayank', 'Puneet'],
                pool: 1100,
                prizes: [600, 400, 100],
                results: [
                    { name: 'Neeraj', score: 61, captain: 'Salah', prize: 600 },
                    { name: 'Puneet', score: 56, captain: 'Ekitik√©', prize: 400 },
                    { name: 'Gokul', score: 53, captain: 'Haaland', prize: 100 },
                    { name: 'Sukhpal', score: 49, captain: 'Saka', prize: 0 },
                    { name: 'Shubs', score: 48, captain: 'Salah', prize: 0 },
                    { name: 'Mayank', score: 42, captain: 'Haaland', prize: 0 },
                    { name: 'Shashank', score: 42, captain: 'Semenyo', prize: 0 },
                    { name: 'Raghu', score: 41, captain: 'Haaland', prize: 0 },
                    { name: 'Bharath', score: 38, captain: 'Salah', prize: 0 },
                    { name: 'Venky', score: 37, captain: 'Haaland', prize: 0 },
                    { name: 'Sandesh', score: 29, captain: '√òdegaard', prize: 0 }
                ]
            },
            3: {
                players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh'],
                pool: 1400,
                prizes: [700, 400, 200, 100],
                results: [
                    { name: 'Sandesh', score: 83, captain: 'Jo√£o Pedro', prize: 700 },
                    { name: 'Shashank', score: 67, captain: 'Mbeumo', prize: 400 },
                    { name: 'Raghu', score: 64, captain: 'Haaland', prize: 150 },
                    { name: 'Sarjan', score: 64, captain: 'Jo√£o Pedro', prize: 150 },
                    { name: 'Gokul', score: 63, captain: 'Haaland', prize: 0 },
                    { name: 'Bharath', score: 58, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Venky', score: 54, captain: 'Haaland', prize: 0 },
                    { name: 'Neeraj', score: 53, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Mayank', score: 52, captain: 'Haaland', prize: 0 },
                    { name: 'Sukhpal', score: 44, captain: 'Wood', prize: 0 },
                    { name: 'Aniruddh', score: 43, captain: 'Wood', prize: 0 },
                    { name: 'Puneet', score: 40, captain: 'Haaland', prize: 0 },
                    { name: 'Shubs', score: 37, captain: 'Wood', prize: 0 },
                    { name: 'Rounak', score: 27, captain: 'Wood', prize: 0 }
                ]
            },
            4: {
                players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam'],
                pool: 1500,
                prizes: [700, 450, 250, 100],
                results: [
                    { name: 'Venky', score: 77, captain: 'Salah', prize: 700 },
                    { name: 'Raghu', score: 73, captain: 'Haaland', prize: 450 },
                    { name: 'Sukhpal', score: 69, captain: 'Haaland', prize: 250 },
                    { name: 'Puneet', score: 66, captain: 'Haaland', prize: 100 },
                    { name: 'Arindam', score: 65, captain: 'Haaland', prize: 0 },
                    { name: 'Sandesh', score: 63, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Rounak', score: 63, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Aniruddh', score: 63, captain: 'Haaland', prize: 0 },
                    { name: 'Neeraj', score: 62, captain: 'Salah', prize: 0 },
                    { name: 'Sarjan', score: 60, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Shashank', score: 58, captain: 'Salah', prize: 0 },
                    { name: 'Shubs', score: 55, captain: 'Salah', prize: 0 },
                    { name: 'Gokul', score: 53, captain: 'Kudus', prize: 0 },
                    { name: 'Mayank', score: 46, captain: 'Haaland', prize: 0 },
                    { name: 'Bharath', score: 41, captain: 'Ekitik√©', prize: 0 }
                ]
            },
            5: {
                players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam'],
                pool: 1500,
                prizes: [500, 400, 300, 200, 100],
                results: [
                    { name: 'Mayank', score: 63, captain: 'Haaland', prize: 500 },
                    { name: 'Puneet', score: 61, captain: 'Haaland', prize: 400 },
                    { name: 'Raghu', score: 60, captain: 'Haaland', prize: 300 },
                    { name: 'Bharath', score: 57, captain: 'Ekitik√©', prize: 200 },
                    { name: 'Aniruddh', score: 55, captain: 'Haaland', prize: 100 },
                    { name: 'Venky', score: 51, captain: 'Salah', prize: 0 },
                    { name: 'Sukhpal', score: 49, captain: 'Haaland', prize: 0 },
                    { name: 'Neeraj', score: 47, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Arindam', score: 47, captain: 'Haaland', prize: 0 },
                    { name: 'Shashank', score: 44, captain: 'Salah', prize: 0 },
                    { name: 'Sarjan', score: 44, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Gokul', score: 43, captain: 'Kudus', prize: 0 },
                    { name: 'Sandesh', score: 40, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Shubs', score: 39, captain: 'Salah', prize: 0 },
                    { name: 'Rounak', score: 38, captain: 'Jo√£o Pedro', prize: 0 }
                ]
            },
            6: {
                players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam', 'Sagar', 'Jalaj'],
                pool: 1700,
                prizes: [600, 400, 300, 250, 150],
                results: [
                    { name: 'Gokul', score: 68, captain: 'Haaland', prize: 600 },
                    { name: 'Mayank', score: 65, captain: 'Haaland', prize: 400 },
                    { name: 'Sukhpal', score: 64, captain: 'Haaland', prize: 300 },
                    { name: 'Aniruddh', score: 59, captain: 'Haaland', prize: 250 },
                    { name: 'Rounak', score: 57, captain: 'Haaland', prize: 150 },
                    { name: 'Raghu', score: 56, captain: 'Haaland', prize: 0 },
                    { name: 'Shubs', score: 56, captain: 'Haaland', prize: 0 },
                    { name: 'Sagar', score: 55, captain: 'Haaland', prize: 0 },
                    { name: 'Puneet', score: 49, captain: 'Haaland', prize: 0 },
                    { name: 'Venky', score: 48, captain: 'Haaland', prize: 0 },
                    { name: 'Sandesh', score: 46, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Shashank', score: 39, captain: 'Salah', prize: 0 },
                    { name: 'Sarjan', score: 29, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Neeraj', score: 27, captain: 'Richarlison', prize: 0 },
                    { name: 'Jalaj', score: 26, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Bharath', score: 24, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Arindam', score: 18, captain: 'Haaland', prize: 0 }
                ]
            },
            7: {
                players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam', 'Sagar', 'Jalaj'],
                pool: 1700,
                prizes: [600, 400, 300, 250, 150],
                results: [
                    { name: 'Gokul', score: 95, captain: 'Haaland', prize: 600 },
                    { name: 'Bharath', score: 83, captain: 'Haaland', prize: 400 },
                    { name: 'Rounak', score: 77, captain: 'Haaland', prize: 300 },
                    { name: 'Neeraj', score: 74, captain: 'Haaland', prize: 200 },
                    { name: 'Aniruddh', score: 74, captain: 'Haaland', prize: 200 },
                    { name: 'Puneet', score: 71, captain: 'Haaland', prize: 0 },
                    { name: 'Sukhpal', score: 71, captain: 'Haaland', prize: 0 },
                    { name: 'Arindam', score: 70, captain: 'Haaland', prize: 0 },
                    { name: 'Shubs', score: 69, captain: 'Haaland', prize: 0 },
                    { name: 'Shashank', score: 68, captain: 'Mbeumo', prize: 0 },
                    { name: 'Mayank', score: 66, captain: 'Haaland', prize: 0 },
                    { name: 'Sagar', score: 65, captain: 'Haaland', prize: 0 },
                    { name: 'Venky', score: 55, captain: 'Haaland', prize: 0 },
                    { name: 'Raghu', score: 50, captain: 'Haaland', prize: 0 },
                    { name: 'Jalaj', score: 48, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Sandesh', score: 47, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Sarjan', score: 41, captain: 'Jo√£o Pedro', prize: 0 }
                ]
            },
            8: {
                players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam', 'Sagar', 'Jalaj'],
                pool: 1700,
                prizes: [600, 400, 300, 250, 150],
                results: [
                    { name: 'Bharath', score: 90, captain: 'Haaland', prize: 600 },
                    { name: 'Sukhpal', score: 81, captain: 'Haaland', prize: 400 },
                    { name: 'Mayank', score: 80, captain: 'Haaland (TC)', prize: 275 },
                    { name: 'Gokul', score: 80, captain: 'Haaland', prize: 275 },
                    { name: 'Aniruddh', score: 72, captain: 'Haaland', prize: 150 },
                    { name: 'Neeraj', score: 69, captain: 'Haaland', prize: 0 },
                    { name: 'Rounak', score: 68, captain: 'Haaland', prize: 0 },
                    { name: 'Sandesh', score: 68, captain: 'Jo√£o Pedro (FH)', prize: 0 },
                    { name: 'Shubs', score: 64, captain: 'Haaland', prize: 0 },
                    { name: 'Raghu', score: 63, captain: 'Haaland (WC)', prize: 0 },
                    { name: 'Puneet', score: 60, captain: 'Haaland', prize: 0 },
                    { name: 'Venky', score: 54, captain: 'Haaland', prize: 0 },
                    { name: 'Arindam', score: 50, captain: 'Haaland', prize: 0 },
                    { name: 'Shashank', score: 46, captain: 'Semenyo', prize: 0 },
                    { name: 'Sagar', score: 44, captain: 'Haaland', prize: 0 },
                    { name: 'Sarjan', score: 42, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Jalaj', score: 37, captain: 'Jo√£o Pedro', prize: 0 }
                ]
            },
            9: {
                players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam', 'Sagar', 'Jalaj'],
                pool: 1700,
                prizes: [600, 400, 300, 250, 150],
                results: [
                    { name: 'Shashank', score: 69, captain: 'Mbeumo', prize: 600 },
                    { name: 'Bharath', score: 68, captain: 'Jo√£o Pedro', prize: 400 },
                    { name: 'Raghu', score: 67, captain: 'Haaland (WC)', prize: 300 },
                    { name: 'Sukhpal', score: 61, captain: 'Haaland', prize: 250 },
                    { name: 'Venky', score: 57, captain: 'Haaland', prize: 50 },
                    { name: 'Sagar', score: 57, captain: 'Haaland', prize: 50 },
                    { name: 'Jalaj', score: 57, captain: 'Jo√£o Pedro', prize: 50 },
                    { name: 'Arindam', score: 48, captain: 'Haaland', prize: 0 },
                    { name: 'Puneet', score: 45, captain: 'Haaland', prize: 0 },
                    { name: 'Rounak', score: 44, captain: 'Haaland', prize: 0 },
                    { name: 'Sandesh', score: 44, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Mayank', score: 43, captain: 'Semenyo', prize: 0 },
                    { name: 'Neeraj', score: 37, captain: 'Haaland', prize: 0 },
                    { name: 'Sarjan', score: 37, captain: 'Jo√£o Pedro', prize: 0 },
                    { name: 'Shubs', score: 36, captain: 'Haaland (WC)', prize: 0 },
                    { name: 'Aniruddh', score: 36, captain: 'Semenyo', prize: 0 },
                    { name: 'Gokul', score: 31, captain: 'Haaland', prize: 0 }
                ]
            }
        };

        let currentGW = 9;

        function showGW(gw) {
            currentGW = gw;
            document.querySelectorAll('.gw-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            updateBattle();
        }

        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => {
                t.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.content').forEach(c => {
                c.classList.remove('active');
            });
            document.getElementById(tab).classList.add('active');
            
            if (tab === 'standings') updateStandings();
            if (tab === 'stats') updateStats();
        }

        function updateBattle() {
            const data = gameData[currentGW];
            
            // Generate spotlight story
            const spotlight = generateSpotlight(currentGW);
            document.getElementById('spotlight').innerHTML = spotlight;
            
            document.getElementById('poolAmount').textContent = data.pool;
            document.getElementById('playerCount').textContent = data.players.length;
            document.getElementById('currentGW').textContent = currentGW;
            
            // Update prizes
            const medals = ['ü•á', 'ü•à', 'ü•â', 'üéñÔ∏è', 'üèÖ'];
            const prizeHTML = data.prizes.map((prize, i) => `
                <div class="prize">
                    <div class="prize-emoji">${medals[i]}</div>
                    <div class="prize-amount">‚Çπ${prize}</div>
                </div>
            `).join('');
            document.getElementById('prizeList').innerHTML = prizeHTML;
            
            // Get previous GW positions for trend arrows
            const prevGW = gameData[currentGW - 1];
            const prevPositions = {};
            if (prevGW) {
                prevGW.results.forEach((player, idx) => {
                    prevPositions[player.name] = idx + 1;
                });
            }
            
            // Update leaderboard
            const leaderboardHTML = data.results.map((player, i) => {
                const rank = i + 1;
                let rankClass = rank <= 3 ? `rank-${rank}` : (player.prize > 0 ? 'rank-other' : '');
                let rankDisplay = rank <= 5 && player.prize > 0 ? medals[rank-1] : rank;
                
                // Calculate trend
                let trendArrow = '';
                if (prevPositions[player.name]) {
                    const prevRank = prevPositions[player.name];
                    if (prevRank > rank) {
                        trendArrow = '<span class="trend-indicator trend-up">üìà</span>';
                    } else if (prevRank < rank) {
                        trendArrow = '<span class="trend-indicator trend-down">üìâ</span>';
                    } else {
                        trendArrow = '<span class="trend-indicator trend-same">‚û°Ô∏è</span>';
                    }
                }
                
                const winnerClass = player.prize > 0 ? 'winner' : '';
                
                return `
                    <div class="player-row ${winnerClass}">
                        <div class="rank ${rankClass}">${rankDisplay}</div>
                        <div class="player-info">
                            <div class="player-name">${player.name}${trendArrow}</div>
                            <div class="player-captain">‚ö° ${player.captain}</div>
                        </div>
                        <div class="score-prize">
                            <div class="score">${player.score}</div>
                            ${player.prize > 0 ? `<div class="prize-won">+‚Çπ${player.prize}</div>` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('leaderboard').innerHTML = leaderboardHTML;
        }
        
        function generateSpotlight(gw) {
            const stories = {
                9: {
                    emoji: 'ü¶Ñ',
                    title: 'The Differential King Strikes!',
                    story: '<span class="highlight">Shashank</span> finally gets his vindication! After weeks of brave differential captains (Semenyo, Mbeumo), the <span class="highlight">Mbeumo pick delivers a VICTORY</span> with 69 points. Meanwhile, <span class="highlight">Bharath\'s on fire</span> with three consecutive top-2 finishes (1st‚Üí1st‚Üí2nd), and <span class="highlight">Gokul crashes from 95 to 31 points</span> in just 2 gameweeks! üí•'
                },
                8: {
                    emoji: 'üî•',
                    title: 'Bharath\'s Back-to-Back Domination!',
                    story: '<span class="highlight">Bharath wins again</span> with a massive 90 points, making it consecutive victories! <span class="highlight">Mayank uses Triple Captain</span> and secures 3rd place with 80 points. Three-way tie for 3rd splits the prize pool as the <span class="highlight">Haaland template dominates</span> once more.'
                },
                7: {
                    emoji: 'üëë',
                    title: 'Gokul Goes Nuclear!',
                    story: '<span class="highlight">Gokul smashes 95 points</span> in an absolute masterclass performance! <span class="highlight">Bharath resurrects</span> from dead last (24 pts in GW6) to 2nd place with 83 points. <span class="highlight">14 out of 17</span> captained Haaland in the biggest template week yet!'
                },
                6: {
                    emoji: 'üéØ',
                    title: 'Gokul Rises to the Top!',
                    story: '<span class="highlight">Gokul wins with 68 points</span> as Haaland captainers dominate the top. <span class="highlight">Bharath bombs to last</span> with just 24 points, while the prize money gets spread across 5 winners for the first time!'
                },
                5: {
                    emoji: 'üí∞',
                    title: 'Five-Way Prize Split!',
                    story: '<span class="highlight">Mayank takes the crown</span> with 63 points as five players share the prize pool. <span class="highlight">Most balanced week yet</span> with money distributed across multiple winners!'
                },
                4: {
                    emoji: 'üöÄ',
                    title: 'Venky\'s Salah Masterclass!',
                    story: '<span class="highlight">Venky wins big</span> with 77 points as the Salah captain differential pays off! Four prize winners emerge as competition heats up.'
                },
                3: {
                    emoji: 'üåä',
                    title: 'Sandesh\'s Massive Haul!',
                    story: '<span class="highlight">Sandesh crushes it</span> with 83 points and a Jo√£o Pedro captain! First 4-prize week as the pool expands to 14 warriors.'
                },
                2: {
                    emoji: '‚ö°',
                    title: 'Neeraj Wins the Opener!',
                    story: '<span class="highlight">Neeraj claims first blood</span> with 61 points and a Salah captain! The journey begins with 11 brave warriors entering the arena.'
                }
            };
            
            const story = stories[gw] || { emoji: 'üéÆ', title: 'The Battle Continues!', story: 'Another exciting gameweek in the books!' };
            
            return `
                <div class="spotlight-card">
                    <div class="spotlight-title">
                        <span class="spotlight-emoji">${story.emoji}</span>
                        ${story.title}
                    </div>
                    <div class="spotlight-story">${story.story}</div>
                </div>
            `;
        }

        function updateStandings() {
            const earnings = {};
            
            // Calculate net earnings and streaks
            Object.keys(gameData).forEach(gwNum => {
                const gw = gameData[gwNum];
                gw.results.forEach((result, idx) => {
                    if (gw.players.includes(result.name)) {
                        if (!earnings[result.name]) {
                            earnings[result.name] = { won: 0, played: 0, wins: [], topStreak: 0, currentStreak: 0 };
                        }
                        earnings[result.name].played++;
                        if (result.prize > 0) {
                            earnings[result.name].won += result.prize;
                            earnings[result.name].wins.push(gwNum);
                            earnings[result.name].currentStreak++;
                            earnings[result.name].topStreak = Math.max(earnings[result.name].topStreak, earnings[result.name].currentStreak);
                        } else {
                            earnings[result.name].currentStreak = 0;
                        }
                    }
                });
            });
            
            // Calculate net and sort
            const standings = Object.entries(earnings).map(([name, data]) => ({
                name,
                net: data.won - (data.played * 100),
                won: data.won,
                played: data.played,
                wins: data.wins,
                streak: data.currentStreak,
                topStreak: data.topStreak
            })).sort((a, b) => b.net - a.net);
            
            const standingsHTML = standings.map(player => {
                const streakBadge = player.streak >= 2 ? `<span class="streak-badge">üî• ${player.streak}x Streak</span>` : '';
                
                return `
                <div class="standing-card">
                    <div class="standing-player">
                        <div class="standing-name">${player.name}${streakBadge}</div>
                        <div class="standing-stats">
                            üéÆ ${player.played} games | üí∞ ‚Çπ${player.played * 100} locked | Won: ‚Çπ${player.won}
                        </div>
                    </div>
                    <div class="standing-earnings">
                        <div class="net-amount ${player.net >= 0 ? 'positive' : 'negative'}">
                            ${player.net >= 0 ? '+' : ''}‚Çπ${Math.abs(player.net)}
                        </div>
                    </div>
                </div>
            `}).join('');
            document.getElementById('standingsList').innerHTML = standingsHTML;
        }

        function updateStats() {
            // Calculate comprehensive stats
            const playerStats = {};
            Object.values(gameData).forEach(gw => {
                gw.results.forEach((result, index) => {
                    if (gw.players.includes(result.name)) {
                        if (!playerStats[result.name]) {
                            playerStats[result.name] = { 
                                games: 0, wins: 0, podiums: 0, scores: [], positions: [], earnings: 0 
                            };
                        }
                        playerStats[result.name].games++;
                        playerStats[result.name].scores.push(result.score);
                        playerStats[result.name].positions.push(index + 1);
                        if (index === 0) playerStats[result.name].wins++;
                        if (index < 3) playerStats[result.name].podiums++;
                        if (result.prize > 0) playerStats[result.name].earnings += result.prize;
                    }
                });
            });
            
            // Generate Player Stories
            const playerStories = {
                'Bharath': {
                    emoji: 'üî•',
                    story: 'From zero to hero! Dead last in GW6 with 24 points, then BOOM - back-to-back victories with 83 and 90 points! Now on a ridiculous 3-game podium streak (1st‚Üí1st‚Üí2nd). The ultimate phoenix rising from the ashes. Everyone else is playing checkers, Bharath is playing 4D chess.'
                },
                'Gokul': {
                    emoji: 'üé¢',
                    story: 'The definition of volatility. Dropped a nuclear 95-point bomb in GW7, then crashed to 31 points in GW9. That\'s a 64-point swing! Won the league early with 2 victories, but lately it\'s been more rollercoaster than rocket ship. Still up ‚Çπ750 though, so who\'s complaining?'
                },
                'Shashank': {
                    emoji: 'ü¶Ñ',
                    story: 'The differential king finally got his crown! While everyone was captaining Haaland like sheep, this maverick picked Mbeumo and won GW9. Also tried Semenyo multiple times. Playing FPL on hard mode and making it look good. Patience pays off, differential gang rise up!'
                },
                'Sukhpal': {
                    emoji: 'üéØ',
                    story: 'Mr. Consistent strikes again. Never wins, never bombs. Just quietly grinds into the top 4 almost every week. 2nd in GW8, 4th in GW9, multiple top-5 finishes. Not flashy, just effective. The tortoise in a race of hares, and currently ahead in the standings!'
                },
                'Raghu': {
                    emoji: 'üíî',
                    story: 'Started as a top-3 machine in early GWs, but the wheels fell off dramatically. Hit wildcard in GW8 and got 63 points (meh), then redeemed himself with 3rd place in GW9. The comeback trail is real. Can the early-season Raghu return?'
                },
                'Neeraj': {
                    emoji: '‚ö°',
                    story: 'Won the very first GW and thought "this is easy!" Narrator: It was not easy. Since that GW2 victory, been wandering in the middle of the pack. Sometimes top-5, sometimes bottom-5. The ultimate enigma wrapped in a mystery. Will lightning strike twice?'
                },
                'Aniruddh': {
                    emoji: 'üéñÔ∏è',
                    story: 'The prize hunter! Doesn\'t win often, but always seems to finish in the money. Multiple top-5 finishes keeping the net positive. The definition of "playing it safe" - rarely at the top, rarely at the bottom, just banking prizes week after week.'
                },
                'Rounak': {
                    emoji: 'üìà',
                    story: 'The late bloomer! Started at 14th in GW3 and everyone wrote him off. Now look at him - 3rd place in GW7, 7th and 10th in recent weeks. Slowly but surely climbing the ladder. Give this man another month and he might just take over the league!'
                },
                'Mayank': {
                    emoji: 'üÉè',
                    story: 'Triple Captain in GW8, got 80 points and 3rd place. Respectable! Won GW5 as well. But consistency? Never heard of her. Goes from top-3 to bottom-5 and back again. Living on the edge, one gameweek at a time. The wildcard of the league, literally and figuratively.'
                },
                'Sandesh': {
                    emoji: 'üåä',
                    story: 'Peaked early with a MASSIVE 83-point GW3 victory and been chasing that high ever since. Used Free Hit in GW8 and... got 7th place. Sometimes the best strategy is overthinking. Still, that early win bankroll is keeping him afloat!'
                },
                'Puneet': {
                    emoji: 'üíº',
                    story: 'The solid performer who never quite gets over the hump. Won GW2, and since then? Always close, never quite there. Multiple top-6 finishes but the W is elusive. The definition of "so close yet so far." One day, Puneet, one day...'
                },
                'Venky': {
                    emoji: 'üé≠',
                    story: 'Won GW4 with a beautiful Salah differential, then proceeded to forget how he did it. Up and down, but mostly down recently. Still managed to split 5th place in GW9, so the comeback might be brewing. The early-season hero looking for redemption!'
                },
                'Shubs': {
                    emoji: 'üí∏',
                    story: 'The league\'s most generous donor. Played every single gameweek, won exactly zero rupees. Used wildcard in GW9 and finished 15th. Pain. Pure pain. But hey, someone has to fund everyone else\'s winnings, and Shubs is taking one for the team like a champ!'
                },
                'Sagar': {
                    emoji: 'üé≤',
                    story: 'Started in GW6, immediately thought "I got this!" Narrator: He did not have this. Been hovering around mid-to-bottom positions. Split 5th place in GW9 though, so maybe the tide is turning? The new guy trying to prove he belongs. Keep grinding!'
                },
                'Jalaj': {
                    emoji: 'üé£',
                    story: 'The Jo√£o Pedro loyalist! Everyone else is chasing Haaland, Jalaj is out here backing Jo√£o Pedro like it\'s a religion. Finally split 5th place in GW9! Sometimes loyalty pays off... just not consistently. But when it hits, it feels so good.'
                },
                'Sarjan': {
                    emoji: 'üòÖ',
                    story: 'Another Jo√£o Pedro faithful, but the results have been... let\'s say "character building." Bottom-3 finishes are becoming a habit. But there\'s always next week! Sometimes you\'re the hammer, sometimes you\'re the nail. Sarjan is definitely the nail right now.'
                },
                'Arindam': {
                    emoji: 'üå±',
                    story: 'Joined in GW4 and has been on a journey of self-discovery. Some highs, many lows, but always learning. Currently down ‚Çπ500 but hey, you can\'t put a price on the FPL experience! The eternal optimist who believes next week will be different.'
                }
            };
            
            // Generate Player Stories HTML
            const storiesHTML = Object.entries(playerStories)
                .filter(([name]) => playerStats[name] && playerStats[name].games >= 5)
                .sort((a, b) => (playerStats[b[0]].earnings - playerStats[b[0]].games * 100) - (playerStats[a[0]].earnings - playerStats[a[0]].games * 100))
                .map(([name, story]) => `
                    <div class="player-story-card">
                        <div class="story-header">
                            <div class="story-player">${name}</div>
                            <div class="story-emoji">${story.emoji}</div>
                        </div>
                        <div class="story-text">${story.story}</div>
                    </div>
                `).join('');
            
            document.getElementById('playerStories').innerHTML = storiesHTML;
            
            // Calculate trends and movements
            const calculateTrend = (positions) => {
                if (positions.length < 3) return 0;
                const recent3 = positions.slice(-3);
                const earlier3 = positions.slice(-6, -3);
                if (earlier3.length === 0) return 0;
                const recentAvg = recent3.reduce((a,b) => a+b, 0) / recent3.length;
                const earlierAvg = earlier3.reduce((a,b) => a+b, 0) / earlier3.length;
                return earlierAvg - recentAvg; // Positive = improving
            };

            // Find best resurrection story
            const findResurrection = () => {
                const candidates = Object.entries(playerStats).filter(([_, s]) => s.games >= 6).map(([name, stats]) => {
                    const worst = Math.max(...stats.positions);
                    const worstIndex = stats.positions.lastIndexOf(worst);
                    if (worstIndex >= stats.positions.length - 2) return [name, {...stats, score: 0}];
                    const afterWorst = stats.positions.slice(worstIndex + 1);
                    const improvement = worst - (afterWorst.reduce((a,b) => a+b, 0) / afterWorst.length);
                    return [name, {...stats, score: improvement, worst, afterWorst: afterWorst.length}];
                });
                return candidates.sort((a, b) => b[1].score - a[1].score)[0];
            };

            // Find peak performance
            const peakPerformance = Object.entries(playerStats).map(([name, stats]) => {
                const maxScore = Math.max(...stats.scores);
                return [name, {...stats, maxScore}];
            }).sort((a, b) => b[1].maxScore - a[1].maxScore)[0];

            // Performance Awards
            const performanceAwards = [
                {
                    title: 'King of the League',
                    emoji: 'üëë',
                    desc: 'Most victories - the champion',
                    winner: Object.entries(playerStats).sort((a, b) => b[1].wins - a[1].wins)[0]
                },
                {
                    title: 'Resurrection Master',
                    emoji: 'üî•',
                    desc: 'Ultimate comeback from disaster',
                    winner: findResurrection()
                },
                {
                    title: 'Peak Performance',
                    emoji: '‚õ∞Ô∏è',
                    desc: 'Highest single GW score',
                    winner: peakPerformance
                },
                {
                    title: 'Mr. Reliable',
                    emoji: 'üéØ',
                    desc: 'Most consistent positions',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.games >= 5).map(([name, stats]) => {
                        const avg = stats.positions.reduce((a,b) => a+b, 0) / stats.positions.length;
                        const variance = stats.positions.reduce((sum, pos) => sum + Math.pow(pos - avg, 2), 0) / stats.positions.length;
                        return [name, {...stats, variance}];
                    }).sort((a, b) => a[1].variance - b[1].variance)[0]
                },
                {
                    title: 'Prize Magnet',
                    emoji: 'üéñÔ∏è',
                    desc: 'Most top-5 finishes',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.games >= 5).map(([name, stats]) => {
                        const prizeCount = stats.positions.filter(p => p <= 5).length;
                        return [name, {...stats, prizeCount}];
                    }).sort((a, b) => b[1].prizeCount - a[1].prizeCount)[0]
                },
                {
                    title: 'Form Horse',
                    emoji: 'üêé',
                    desc: 'On fire right now (L3 avg)',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.games >= 3).map(([name, stats]) => {
                        const recent3 = stats.positions.slice(-3);
                        const avgRecent = recent3.reduce((a,b) => a+b, 0) / recent3.length;
                        return [name, {...stats, avgRecent}];
                    }).sort((a, b) => a[1].avgRecent - b[1].avgRecent)[0]
                }
            ];
            
            // Fun Awards - Story-driven badges
            const funAwards = [
                {
                    title: 'Phoenix Rising',
                    emoji: 'üî•',
                    desc: 'From ashes to glory - epic turnaround',
                    winner: ['Bharath', playerStats['Bharath']]
                },
                {
                    title: 'Differential Genius',
                    emoji: 'üß†',
                    desc: 'Brave captains against the template',
                    winner: ['Shashank', playerStats['Shashank']]
                },
                {
                    title: 'The Fader',
                    emoji: 'üìâ',
                    desc: 'Started strong, momentum fading',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.games >= 5).map(([name, stats]) => {
                        const firstHalf = stats.positions.slice(0, Math.floor(stats.games/2));
                        const secondHalf = stats.positions.slice(Math.floor(stats.games/2));
                        const decline = (secondHalf.reduce((a,b) => a+b, 0) / secondHalf.length) - 
                                       (firstHalf.reduce((a,b) => a+b, 0) / firstHalf.length);
                        return [name, {...stats, decline}];
                    }).sort((a, b) => b[1].decline - a[1].decline)[0]
                },
                {
                    title: 'So Close Yet So Far',
                    emoji: 'üò´',
                    desc: 'Multiple top-6 without winning',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.wins === 0 && s.games >= 5).map(([name, stats]) => {
                        const nearMisses = stats.positions.filter(p => p <= 6).length;
                        return [name, {...stats, nearMisses}];
                    }).sort((a, b) => b[1].nearMisses - a[1].nearMisses)[0]
                },
                {
                    title: 'Wildcard Warrior',
                    emoji: 'üé∞',
                    desc: 'Most unpredictable week-to-week',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.games >= 5).map(([name, stats]) => {
                        const swings = [];
                        for (let i = 1; i < stats.positions.length; i++) {
                            swings.push(Math.abs(stats.positions[i] - stats.positions[i-1]));
                        }
                        const avgSwing = swings.reduce((a,b) => a+b, 0) / swings.length;
                        return [name, {...stats, avgSwing}];
                    }).sort((a, b) => b[1].avgSwing - a[1].avgSwing)[0]
                },
                {
                    title: 'Early Peak Syndrome',
                    emoji: 'üí´',
                    desc: 'Chasing that first high',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.games >= 5).map(([name, stats]) => {
                        const bestPos = Math.min(...stats.positions);
                        const bestIndex = stats.positions.indexOf(bestPos);
                        if (bestIndex >= stats.positions.length - 2) return [name, {...stats, score: 0}];
                        const afterBest = stats.positions.slice(bestIndex + 1);
                        const decline = afterBest.reduce((a,b) => a+b, 0) / afterBest.length - bestPos;
                        return [name, {...stats, score: bestPos === 1 ? decline * 2 : decline}];
                    }).sort((a, b) => b[1].score - a[1].score)[0]
                },
                {
                    title: 'Late Bloomer',
                    emoji: 'üå±',
                    desc: 'Getting better with time',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.games >= 5).map(([name, stats]) => {
                        const firstHalf = stats.positions.slice(0, Math.floor(stats.games/2));
                        const secondHalf = stats.positions.slice(Math.floor(stats.games/2));
                        const improvement = (firstHalf.reduce((a,b) => a+b, 0) / firstHalf.length) - 
                                           (secondHalf.reduce((a,b) => a+b, 0) / secondHalf.length);
                        return [name, {...stats, improvement}];
                    }).sort((a, b) => b[1].improvement - a[1].improvement)[0]
                },
                {
                    title: 'Template Prisoner',
                    emoji: 'üêë',
                    desc: 'Following the crowd to nowhere',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.games >= 5 && s.wins === 0).map(([name, stats]) => {
                        const bottom = stats.positions.filter(p => p > 10).length;
                        return [name, {...stats, bottom}];
                    }).sort((a, b) => b[1].bottom - a[1].bottom)[0]
                },
                {
                    title: 'Mid-Table Merchant',
                    emoji: '‚öôÔ∏è',
                    desc: 'Safely average, never spectacular',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.games >= 5).map(([name, stats]) => {
                        const midTable = stats.positions.filter(p => p >= 6 && p <= 11).length;
                        const rate = midTable / stats.games;
                        return [name, {...stats, rate, midTable}];
                    }).sort((a, b) => b[1].rate - a[1].rate)[0]
                },
                {
                    title: 'Generous Donor',
                    emoji: 'üí∏',
                    desc: 'Funding everyone else\'s success',
                    winner: Object.entries(playerStats).filter(([_, s]) => s.earnings === 0 && s.games >= 5)
                        .sort((a, b) => b[1].games - a[1].games)[0]
                }
            ].filter(award => award.winner && award.winner[1]);
            
            const performanceHTML = performanceAwards.filter(a => a.winner).map(award => {
                const [name, stats] = award.winner;
                let statDetail = '';
                
                // Add stat details based on award type
                if (award.title === 'King of the League') {
                    statDetail = `<div class="stat-bar"><div class="stat-fill" style="width: ${(stats.wins / stats.games * 100)}%"></div></div>`;
                } else if (award.title === 'Prize Magnet') {
                    statDetail = `<div class="stat-bar"><div class="stat-fill" style="width: ${(stats.prizeCount / stats.games * 100)}%"></div></div>`;
                }
                
                return `
                    <div class="award">
                        <div class="award-info">
                            <div class="award-title">${award.emoji} ${award.title}</div>
                            <div class="award-desc">${award.desc}</div>
                            ${statDetail}
                        </div>
                        <div class="award-winner">${name}</div>
                    </div>
                `;
            }).join('');
            
            const funHTML = funAwards.filter(a => a.winner).map(award => {
                const [name] = award.winner;
                return `
                    <div class="award">
                        <div class="award-info">
                            <div class="award-title">${award.emoji} ${award.title}</div>
                            <div class="award-desc">${award.desc}</div>
                        </div>
                        <div class="award-winner">${name}</div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('performanceAwards').innerHTML = performanceHTML;
            document.getElementById('funAwards').innerHTML = funHTML;
        }

        // Initialize
        updateBattle();
    </script>
</body>
</html>
