<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scapia FPL Weekly Tracker</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --scapia-orange: #FF6B35;
            --scapia-dark: #1A1A2E;
            --scapia-navy: #16213E;
            --scapia-accent: #0F3460;
            --scapia-gold: #FFD700;
            --scapia-silver: #C0C0C0;
            --scapia-bronze: #CD7F32;
            --success: #48bb78;
            --danger: #e53e3e;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--scapia-dark) 0%, var(--scapia-navy) 50%, var(--scapia-accent) 100%);
            min-height: 100vh;
            color: #fff;
            padding: 15px;
        }
        .container { max-width: 500px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; }
        .logo { font-size: 2.5rem; font-weight: 900; color: var(--scapia-orange); text-shadow: 0 0 20px rgba(255, 107, 53, 0.5); }
        .tagline { color: #a0aec0; font-style: italic; margin-top: 5px; }
        
        /* GW Selector */
        .gw-selector { display: flex; gap: 10px; margin-bottom: 25px; overflow-x: auto; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 15px; scrollbar-width: none; }
        .gw-selector::-webkit-scrollbar { display: none; }
        .gw-btn { padding: 10px 18px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: #fff; border-radius: 10px; cursor: pointer; font-weight: 600; transition: all 0.3s; white-space: nowrap; }
        .gw-btn:hover { background: rgba(255, 107, 53, 0.2); transform: translateY(-2px); }
        .gw-btn.active { background: var(--scapia-orange); box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3); }
        
        /* Tabs */
        .tabs { display: flex; background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 4px; margin-bottom: 25px; }
        .tab { flex: 1; padding: 12px; background: transparent; border: none; color: rgba(255, 255, 255, 0.7); font-weight: 600; cursor: pointer; border-radius: 8px; transition: all 0.3s; }
        .tab.active { background: var(--scapia-orange); color: white; }
        .content { display: none; }
        .content.active { display: block; }
        
        /* Cards */
        .prize-card { background: linear-gradient(135deg, rgba(255, 107, 53, 0.2), rgba(255, 107, 53, 0.1)); border: 1px solid var(--scapia-orange); border-radius: 20px; padding: 25px; margin-bottom: 25px; text-align: center; position: relative; overflow: hidden; }
        .spotlight-card { background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 107, 53, 0.15)); border: 2px solid var(--scapia-orange); border-radius: 20px; padding: 20px; margin-bottom: 25px; position: relative; overflow: hidden; }
        .spotlight-title { font-size: 1.3rem; font-weight: 900; color: var(--scapia-orange); margin-bottom: 12px; display: flex; align-items: center; gap: 10px; }
        .spotlight-story { font-size: 1rem; line-height: 1.6; color: #e0e0e0; }
        .highlight { color: var(--scapia-orange); font-weight: 700; }
        
        /* Pool Info */
        .pool-amount { font-size: 2.8rem; font-weight: 900; color: var(--scapia-orange); text-shadow: 0 0 25px rgba(255, 107, 53, 0.5); }
        .pool-info { display: flex; justify-content: space-around; margin: 20px 0; }
        .info-item { text-align: center; }
        .info-value { font-size: 1.3rem; font-weight: 700; }
        .info-label { font-size: 0.8rem; color: #a0aec0; }
        
        /* Prizes */
        .prizes { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 10px; }
        .prize { text-align: center; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; }
        .prize-amount { font-weight: 700; margin-top: 5px; }
        
        /* Leaderboard */
        .leaderboard { background: rgba(255, 255, 255, 0.03); border-radius: 15px; padding: 20px; margin-bottom: 15px; }
        .player-row { display: flex; align-items: center; padding: 15px; margin-bottom: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 12px; transition: all 0.3s; position: relative; }
        .player-row.winner { background: linear-gradient(90deg, rgba(255, 215, 0, 0.2), rgba(255, 107, 53, 0.1)); border-left: 3px solid var(--scapia-gold); }
        .rank { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; font-weight: 900; margin-right: 15px; }
        .rank-1 { background: linear-gradient(135deg, var(--scapia-gold), #ffed4e); color: #000; }
        .rank-2 { background: linear-gradient(135deg, var(--scapia-silver), #d7d7d7); color: #000; }
        .rank-3 { background: linear-gradient(135deg, var(--scapia-bronze), #e6ac79); color: #000; }
        .rank-other { background: rgba(255, 107, 53, 0.2); border: 1px solid var(--scapia-orange); }
        .player-info { flex: 1; }
        .player-name { font-weight: 600; font-size: 1.1rem; display: flex; align-items: center; gap: 6px; }
        .player-captain { font-size: 0.8rem; color: #a0aec0; }
        .score-prize { text-align: right; }
        .score { font-size: 1.3rem; font-weight: 700; }
        .prize-won { color: var(--success); font-weight: 600; }

        /* Story Cards */
        .player-story-card { background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(15, 52, 96, 0.2)); border: 1px solid rgba(255, 107, 53, 0.3); border-radius: 15px; padding: 20px; margin-bottom: 20px; position: relative; overflow: hidden; }
        .story-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; z-index: 2; position: relative; }
        .story-player { font-size: 1.2rem; font-weight: 800; color: var(--scapia-orange); }
        .manager-nick { font-size: 0.9rem; color: #cbd5e0; font-style: italic; font-weight: 400; display: block; margin-top: 2px; }
        .archetype-badge { position: absolute; top: 20px; right: 20px; background: rgba(255, 107, 53, 0.1); border: 1px solid var(--scapia-orange); color: var(--scapia-orange); font-size: 0.65rem; padding: 3px 8px; border-radius: 10px; text-transform: uppercase; font-weight: 700; }
        
        .story-section { margin-top: 15px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); }
        .story-label { font-size: 0.7rem; text-transform: uppercase; color: var(--scapia-orange); letter-spacing: 1px; margin-bottom: 6px; font-weight: 700; opacity: 0.8; }
        .story-text { font-size: 0.9rem; line-height: 1.5; color: #e0e0e0; }
        
        .wallet-pill { font-size: 0.8rem; font-weight: 700; padding: 4px 8px; border-radius: 6px; background: rgba(0,0,0,0.4); display: inline-block; margin-top: 5px; }
        .in-profit { color: var(--success); border: 1px solid var(--success); }
        .in-loss { color: var(--danger); border: 1px solid var(--danger); }
        
        .story-quote { font-family: 'Georgia', serif; font-style: italic; font-size: 0.95rem; color: #fff; opacity: 0.9; background: rgba(255, 255, 255, 0.05); padding: 10px; border-left: 3px solid var(--scapia-orange); margin: 15px 0; border-radius: 0 8px 8px 0; }
        .story-stat-row { display: flex; gap: 10px; margin-top: 12px; flex-wrap: wrap; }
        .story-stat { font-size: 0.75rem; color: #cbd5e0; background: rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.1); }

        /* Banter & Other */
        .banter-section { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 25px; }
        .banter-card { background: rgba(0,0,0,0.3); border-radius: 12px; padding: 12px; }
        .banter-title { font-weight: 700; margin-bottom: 4px; }
        .banter-roast .banter-title { color: var(--danger); }
        .banter-compliment .banter-title { color: var(--success); }
        
        .stats-section { background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 20px; margin-bottom: 20px; }
        .stat-title { font-size: 1.2rem; font-weight: 700; color: var(--scapia-orange); margin-bottom: 15px; }
        
        /* Rivalries & Lore */
        .rivalry-card { padding: 15px; background: linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,107,53,0.05)); border-radius: 12px; margin-bottom: 15px; border-left: 3px solid var(--scapia-orange); }
        .rivalry-header { font-weight: 800; font-size: 1.1rem; color: var(--scapia-orange); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
        .rivalry-names { font-size: 1.1rem; font-weight: 700; color: #fff; display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .rivalry-vs { color: #a0aec0; font-size: 0.9rem; font-style: italic; }
        .rivalry-stat { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 8px; font-size: 0.9rem; color: #e2e8f0; text-align: center; }
        
        .lore-entry { padding: 12px; border-left: 2px solid var(--scapia-orange); background: rgba(255,255,255,0.02); margin-bottom: 10px; border-radius: 0 8px 8px 0; }
        .lore-gw { font-weight: 800; color: var(--scapia-orange); font-size: 0.8rem; margin-bottom: 2px; }
        .lore-text { font-size: 0.9rem; color: #e2e8f0; }
        
        /* Standings */
        .standing-card { background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 18px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; }
        .net-amount { font-size: 1.4rem; font-weight: 900; }
        .positive { color: var(--success); }
        .negative { color: var(--danger); }
        .award { padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .award-title { font-weight: 700; color: var(--scapia-orange); }
        .badge-icon { margin-left: 4px; cursor: help; }
        .award-winner { font-weight: 600; font-size: 1.1rem; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">‚úàÔ∏è SCAPIA FPL</div>
            <div class="tagline">GW16: The Century Club</div>
        </div>

        <div class="gw-selector">
            <button class="gw-btn" onclick="showGW(12)">GW 12</button>
            <button class="gw-btn" onclick="showGW(13)">GW 13</button>
            <button class="gw-btn" onclick="showGW(14)">GW 14</button>
            <button class="gw-btn" onclick="showGW(15)">GW 15</button>
            <button class="gw-btn active" onclick="showGW(16)">GW 16</button>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('battle')">‚öîÔ∏è Battle</button>
            <button class="tab" onclick="showTab('standings')">üèÜ Standings</button>
            <button class="tab" onclick="showTab('stats')">üìä Stats</button>
        </div>

        <div id="battle" class="content active">
            <div id="spotlight"></div>
            <div class="prize-card">
                <div class="pool-amount">‚Çπ<span id="poolAmount">1700</span></div>
                <div class="pool-info">
                    <div class="info-item"><div class="info-value" id="playerCount">17</div><div class="info-label">Warriors</div></div>
                    <div class="info-item"><div class="info-value">‚Çπ100</div><div class="info-label">Entry</div></div>
                    <div class="info-item"><div class="info-value">GW<span id="currentGW">16</span></div><div class="info-label">Battle</div></div>
                </div>
                <div class="prizes" id="prizeList"></div>
            </div>
            <div class="leaderboard" id="leaderboard"></div>
            <div id="banter"></div>
        </div>

        <div id="standings" class="content"><div id="standingsList"></div></div>

        <div id="stats" class="content">
            <div class="stats-section">
                <div class="stat-title">üìñ Manager Profiles & Journeys</div>
                <div id="playerStories"></div>
            </div>
            <div class="stats-section">
                <div class="stat-title">ü§∫ Dynamic Rivalries</div>
                <div id="rivalries"></div>
            </div>
            <div class="stats-section">
                <div class="stat-title">üìú Season History (The Lore)</div>
                <div id="seasonLoreList"></div>
            </div>
            <div class="stats-section">
                <div class="stat-title">üèÜ Performance Awards</div>
                <div id="performanceAwards"></div>
            </div>
            <div class="stats-section">
                <div class="stat-title">üòÇ Hall of Fame & Shame</div>
                <div id="funAwards"></div>
            </div>
        </div>
    </div>

    <script>
        const seasonLore = {
            "GW7": "‚ò¢Ô∏è The Nuclear Option: Gokul drops a season-high 95 points.",
            "GW8": "üî• Heater Check: Bharath dominates with 90 points back-to-back.",
            "GW9": "ü¶Ñ Differential Day: Shashank wins with Mbeumo captain.",
            "GW10": "üö® The Sukhpal Statement: A massive 93-point haul out of nowhere.",
            "GW11": "üßä The Trench War: Aniruddh wins with just 49 points in a low-scoring week.",
            "GW13": "ü§° The Chip Massacre: Multiple Triple Captains fail; Mayank wins with 47.",
            "GW14": "ü§ù The Great Split: Ties for 1st and 4th place create a unique payout structure.",
            "GW15": "ü§Ø The Foden Masterclass: Shashank Triple Captains Foden for a massive 86-point haul.",
            "GW16": "üíØ The Century Club: Rounak smashes 104 points with a Bench Boost."
        };

        const gw16Stories = {
            'Rounak': "104 POINTS! A century! The Bench Boost played to absolute perfection. Rounak has evolved from 'Late Bloomer' to 'End Game Boss'. The league is officially on notice.",
            'Neeraj': "The Lightning Starter finally strikes again. 92 points with a Free Hit and Saka captaincy. A masterclass in capitalizing on a good gameweek to secure the ‚Çπ400 bag.",
            'Sukhpal': "Another podium for the Steady Assassin. 80 points with a Wildcard. He split the prize with Mayank, but his ability to consistently find the money is becoming terrifying.",
            'Mayank': "Tied for 3rd with 80 points (FH). The 'Chip Gambler' actually played a good chip this time! Splitting ‚Çπ550 with Sukhpal keeps his chaotic profitable run alive.",
            'Raghu': "75 points. 5th place. The Narrative Merchant snags the last prize (‚Çπ150) by the skin of his teeth. He is the master of doing *just* enough to stay relevant.",
            'Shashank': "74 points. Bench Boost played, but finished 6th. Missed the money by ONE point. After the high of last week's win, this is a painful reality check.",
            'Aniruddh': "73 points on a Wildcard. Finishing 7th with that score feels harsh, but in a week where 100 was broken, 73 is just 'participation trophy' territory.",
            'Shubs': "71 points. Captained Saka. A solid score that would win money in GW11 or GW13, but today it's just mid-table fodder. The Shark goes hungry this week.",
            'Arindam': "62 points. The Heartbreak Kid usually misses money by 1 point. This week he missed it by 13. A quiet week for the Project.",
            'Puneet': "61 points. Mr. Consistent stays consistent, but the league exploded around him. Stability is great, until everyone else hits turbo mode.",
            'Venky': "59 points. The donation streak continues. The Salah Syndicate needs a bailout package immediately.",
            'Bharath': "58 points. The Heat Check is officially over. He has frozen solid in the mid-table. Needs a new spark.",
            'Sagar': "52 points. The chips are gone, the points are low. It's looking like a long winter for the Valsad Coconuts.",
            'Gokul': "51 points on a WILDCARD? Captained Thiago?! This is peak Volatility FC. From winning weeks to absolute disasters. Never change, Gokul.",
            'Jalaj': "51 points. Captained Palmer. The Pedro Holder didn't have much to celebrate this week.",
            'Sandesh': "50 points. Captained Mateta. Again. The stubbornness is admirable, but the rank is not.",
            'Sarjan': "39 points. Dead last. Captained Jo√£o Pedro. At this point, it's not a strategy, it's a toxic relationship."
        };

        const aiQuotes = {
            'Rounak': "\"I woke up feeling dangerous. 100 points was the only acceptable outcome.\"",
            'Neeraj': "\"Everyone forgot about me. That was a mistake. The batteries are fully charged.\"",
            'Sukhpal': "\"Chaos is a ladder. While you all panic, I just keep climbing.\"",
            'Mayank': "\"They call it luck. I call it calculated probability with a side of absolute randomness.\"",
            'Raghu': "\"5th place is an art form. I painted a masterpiece of mediocrity today.\"",
            'Shashank': "\"One point. One single point. I will remember this when I sleep.\"",
            'Aniruddh': "\"Wildcard used. Results pending. Please contact customer support.\"",
            'Shubs': "\"The shark does not eat every week. Sometimes, the shark just observes.\"",
            'Arindam': "\"Pain is just weakness leaving the body. I must be very strong by now.\"",
            'Puneet': "\"Consistency is key. The key to not winning 104 points, apparently.\"",
            'Venky': "\"The Salah Syndicate is undergoing restructuring. Please bear with us.\"",
            'Gokul': "\"Thiago captain. You wouldn't get it. It's high art.\"",
            'Jalaj': "\"Palmer blanked. Pedro blanked. I am blanking on why I do this.\"",
            'Sandesh': "\"Mateta will come good. Any year now.\"",
            'Sarjan': "\"I am standing by my man. Even if my man is on the Brighton bench.\"",
            'Bharath': "\"Winter is coming. And my team is already frozen.\"",
            'Sagar': "\"Does anyone have a spare Free Hit I can borrow?\""
        };

        const seasonJourneys = {
            'Rounak': { journey: "From the basement in GW3 to the first CENTURY of the season in GW16. He has completed the greatest comeback arc in Scapia history.", signature: "104 PTS (BB)" },
            'Neeraj': { journey: "Started fast, fell asleep for 10 weeks, and just woke up with a vengeance (92 pts). The giant is awake.", signature: "Big Hauls Only" },
            'Sukhpal': { journey: "The most boringly effective manager. He doesn't make headlines, he just makes withdrawals from the prize pool. The baseline of excellence.", signature: "Consistency" },
            'Mayank': { journey: "The 'Wildcard Twin' narrative is dead. He's now the 'Chip Mercenary'. Hits and misses, but when he hits, he gets paid.", signature: "Chip & Dip" },
            'Raghu': { journey: "The survivor. He somehow always finds a way to be in the conversation. 5th place is his new home, and he's comfortable there.", signature: "Scraping By" },
            'Shashank': { journey: "Living life on the edge. One week he's the king (86 pts), the next he misses cash by 1 point. The Differential lifestyle is stressful.", signature: "High Variance" },
            'Gokul': { journey: "The enigma. Scores 95 one week, then 51 on a Wildcard the next. Analyzing his team is impossible; you just have to enjoy the show.", signature: "Thiago Captain??" },
            'Aniruddh': { journey: "The 'Prize Magnet' is malfunctioning. Used a Wildcard and still missed the cash. He needs a recalibration.", signature: "Mid-Table Glue" },
            'Shubs': { journey: "After draining the pot for weeks, the Shark took a breather. He's still dangerous, but the feeding frenzy paused for GW16.", signature: "Late Bloomer" },
            'Arindam': { journey: "The unluckiest man in the league. He plays well, scores well, and consistently finishes one spot below the money. It's a tragedy.", signature: "6th Place King" },
            'Puneet': { journey: "The anchor. He stops the table from floating away. Reliable points, but rarely enough to challenge the explosive scores at the top.", signature: "Safe Hands" },
            'Venky': { journey: "The Salah Syndicate has filed for Chapter 11 bankruptcy. The donations are generous, but the returns are non-existent.", signature: "Donation Mode" },
            'Bharath': { journey: "Remember GW7-9? Those were good times. Since then, he's been ghosting the leaderboard.", signature: "Frozen" },
            'Sagar': { journey: "Came in late, spent all his chips, and is now realizing that FPL is hard without power-ups.", signature: "Out of Ammo" },
            'Jalaj': { journey: "The 'Pedro Holder' is holding onto hope, but hope doesn't score fantasy points. Stuck in the bottom tier loop.", signature: "Pedro or Bust" },
            'Sandesh': { journey: "Still chasing the ghost of GW3. The Mateta captaincy shows he wants to be a differential hero, but he's becoming a villain to his own rank.", signature: "Rogue Picks" },
            'Sarjan': { journey: "Loyalty to Jo√£o Pedro has cost him everything. 39 points in a week where 100 was possible is a cry for help.", signature: "Pedro Victim" }
        };

        const managerMeta = {
            'Rounak': { nick: 'The Centurion', archetype: 'THE END GAME BOSS' },
            'Neeraj': { nick: 'Lightning Starter', archetype: 'THE VOLTAGE' },
            'Sukhpal': { nick: 'Steady Assassin', archetype: 'THE SILENT KILLER' },
            'Mayank': { nick: 'Chip Gambler', archetype: 'THE MERCENARY' },
            'Raghu': { nick: 'Narrative Merchant', archetype: 'THE SURVIVOR' },
            'Shashank': { nick: 'Differential Ultras', archetype: 'THE HIPSTER' },
            'Aniruddh': { nick: 'Prize Magnet', archetype: 'THE GRINDER' },
            'Shubs': { nick: 'Pot Drainer', archetype: 'THE SHARK' },
            'Arindam': { nick: 'Heartbreak Kid', archetype: 'THE ALMOST-HERO' },
            'Puneet': { nick: 'Mr. Consistent', archetype: 'THE BENCHWARMER' },
            'Venky': { nick: 'Salah Syndicate', archetype: 'THE DONATION BOX' },
            'Bharath': { nick: 'Heat Check Merchant', archetype: 'THE STREAK PLAYER' },
            'Sagar': { nick: 'Chip Enthusiast', archetype: 'THE FIREWORK' },
            'Gokul': { nick: 'Volatility FC', archetype: 'THE CHAOS MERCHANT' },
            'Jalaj': { nick: 'Loyal Pedro Holder', archetype: 'THE BUS DRIVER' },
            'Sandesh': { nick: 'Peak GW3', archetype: 'THE ROGUE' },
            'Sarjan': { nick: 'Painful Pedro Enjoyer', archetype: 'THE LOYALIST' }
        };

        const gameData = {
            2: { players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Raghu', 'Mayank', 'Puneet'], pool: 1100, prizes: [600, 400, 100], results: [{ name: 'Neeraj', score: 61, captain: 'Salah', prize: 600 }, { name: 'Puneet', score: 56, captain: 'Ekitik√©', prize: 400 }, { name: 'Gokul', score: 53, captain: 'Haaland', prize: 100 }, { name: 'Sukhpal', score: 49, captain: 'Saka', prize: 0 }, { name: 'Shubs', score: 48, captain: 'Salah', prize: 0 }, { name: 'Mayank', score: 42, captain: 'Haaland', prize: 0 }, { name: 'Shashank', score: 42, captain: 'Semenyo', prize: 0 }, { name: 'Raghu', score: 41, captain: 'Haaland', prize: 0 }, { name: 'Bharath', score: 38, captain: 'Salah', prize: 0 }, { name: 'Venky', score: 37, captain: 'Haaland', prize: 0 }, { name: 'Sandesh', score: 29, captain: '√òdegaard', prize: 0 }] },
            3: { players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh'], pool: 1400, prizes: [700, 400, 200, 100], results: [{ name: 'Sandesh', score: 83, captain: 'Jo√£o Pedro', prize: 700 }, { name: 'Shashank', score: 67, captain: 'Mbeumo', prize: 400 }, { name: 'Raghu', score: 64, captain: 'Haaland', prize: 150 }, { name: 'Sarjan', score: 64, captain: 'Jo√£o Pedro', prize: 150 }, { name: 'Gokul', score: 63, captain: 'Haaland', prize: 0 }, { name: 'Bharath', score: 58, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Venky', score: 54, captain: 'Haaland', prize: 0 }, { name: 'Neeraj', score: 53, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Mayank', score: 52, captain: 'Haaland', prize: 0 }, { name: 'Sukhpal', score: 44, captain: 'Wood', prize: 0 }, { name: 'Aniruddh', score: 43, captain: 'Wood', prize: 0 }, { name: 'Puneet', score: 40, captain: 'Haaland', prize: 0 }, { name: 'Shubs', score: 37, captain: 'Wood', prize: 0 }, { name: 'Rounak', score: 27, captain: 'Wood', prize: 0 }] },
            4: { players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam'], pool: 1500, prizes: [700, 450, 250, 100], results: [{ name: 'Venky', score: 77, captain: 'Salah', prize: 700 }, { name: 'Raghu', score: 73, captain: 'Haaland', prize: 450 }, { name: 'Sukhpal', score: 69, captain: 'Haaland', prize: 250 }, { name: 'Puneet', score: 66, captain: 'Haaland', prize: 100 }, { name: 'Arindam', score: 65, captain: 'Haaland', prize: 0 }, { name: 'Sandesh', score: 63, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Rounak', score: 63, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Aniruddh', score: 63, captain: 'Haaland', prize: 0 }, { name: 'Neeraj', score: 62, captain: 'Salah', prize: 0 }, { name: 'Sarjan', score: 60, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Shashank', score: 58, captain: 'Salah', prize: 0 }, { name: 'Shubs', score: 55, captain: 'Salah', prize: 0 }, { name: 'Gokul', score: 53, captain: 'Kudus', prize: 0 }, { name: 'Mayank', score: 46, captain: 'Haaland', prize: 0 }, { name: 'Bharath', score: 41, captain: 'Ekitik√©', prize: 0 }] },
            5: { players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam'], pool: 1500, prizes: [500, 400, 300, 200, 100], results: [{ name: 'Mayank', score: 63, captain: 'Haaland', prize: 500 }, { name: 'Puneet', score: 61, captain: 'Haaland', prize: 400 }, { name: 'Raghu', score: 60, captain: 'Haaland', prize: 300 }, { name: 'Bharath', score: 57, captain: 'Ekitik√©', prize: 200 }, { name: 'Aniruddh', score: 55, captain: 'Haaland', prize: 100 }, { name: 'Venky', score: 51, captain: 'Salah', prize: 0 }, { name: 'Sukhpal', score: 49, captain: 'Haaland', prize: 0 }, { name: 'Neeraj', score: 47, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Arindam', score: 47, captain: 'Haaland', prize: 0 }, { name: 'Shashank', score: 44, captain: 'Salah', prize: 0 }, { name: 'Sarjan', score: 44, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Gokul', score: 43, captain: 'Kudus', prize: 0 }, { name: 'Sandesh', score: 40, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Shubs', score: 39, captain: 'Salah', prize: 0 }, { name: 'Rounak', score: 38, captain: 'Jo√£o Pedro', prize: 0 }] },
            6: { players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam', 'Sagar', 'Jalaj'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Gokul', score: 68, captain: 'Haaland', prize: 600 }, { name: 'Mayank', score: 65, captain: 'Haaland', prize: 400 }, { name: 'Sukhpal', score: 64, captain: 'Haaland', prize: 300 }, { name: 'Aniruddh', score: 59, captain: 'Haaland', prize: 250 }, { name: 'Rounak', score: 57, captain: 'Haaland', prize: 150 }, { name: 'Raghu', score: 56, captain: 'Haaland', prize: 0 }, { name: 'Shubs', score: 56, captain: 'Haaland', prize: 0 }, { name: 'Sagar', score: 55, captain: 'Haaland', prize: 0 }, { name: 'Puneet', score: 49, captain: 'Haaland', prize: 0 }, { name: 'Venky', score: 48, captain: 'Haaland', prize: 0 }, { name: 'Sandesh', score: 46, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Shashank', score: 39, captain: 'Salah', prize: 0 }, { name: 'Sarjan', score: 29, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Neeraj', score: 27, captain: 'Richarlison', prize: 0 }, { name: 'Jalaj', score: 26, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Bharath', score: 24, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Arindam', score: 18, captain: 'Haaland', prize: 0 }] },
            7: { players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam', 'Sagar', 'Jalaj'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Gokul', score: 95, captain: 'Haaland', prize: 600 }, { name: 'Bharath', score: 83, captain: 'Haaland', prize: 400 }, { name: 'Rounak', score: 77, captain: 'Haaland', prize: 300 }, { name: 'Neeraj', score: 74, captain: 'Haaland', prize: 200 }, { name: 'Aniruddh', score: 74, captain: 'Haaland', prize: 200 }, { name: 'Puneet', score: 71, captain: 'Haaland', prize: 0 }, { name: 'Sukhpal', score: 71, captain: 'Haaland', prize: 0 }, { name: 'Arindam', score: 70, captain: 'Haaland', prize: 0 }, { name: 'Shubs', score: 69, captain: 'Haaland', prize: 0 }, { name: 'Shashank', score: 68, captain: 'Mbeumo', prize: 0 }, { name: 'Mayank', score: 66, captain: 'Haaland', prize: 0 }, { name: 'Sagar', score: 65, captain: 'Haaland', prize: 0 }, { name: 'Venky', score: 55, captain: 'Haaland', prize: 0 }, { name: 'Raghu', score: 50, captain: 'Haaland', prize: 0 }, { name: 'Jalaj', score: 48, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Sandesh', score: 47, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Sarjan', score: 41, captain: 'Jo√£o Pedro', prize: 0 }] },
            8: { players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam', 'Sagar', 'Jalaj'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Bharath', score: 90, captain: 'Haaland', prize: 600 }, { name: 'Sukhpal', score: 81, captain: 'Haaland', prize: 400 }, { name: 'Mayank', score: 80, captain: 'Haaland (TC)', prize: 275 }, { name: 'Gokul', score: 80, captain: 'Haaland', prize: 275 }, { name: 'Aniruddh', score: 72, captain: 'Haaland', prize: 150 }, { name: 'Neeraj', score: 69, captain: 'Haaland', prize: 0 }, { name: 'Rounak', score: 68, captain: 'Haaland', prize: 0 }, { name: 'Sandesh', score: 68, captain: 'Jo√£o Pedro (FH)', prize: 0 }, { name: 'Shubs', score: 64, captain: 'Haaland', prize: 0 }, { name: 'Raghu', score: 63, captain: 'Haaland (WC)', prize: 0 }, { name: 'Puneet', score: 60, captain: 'Haaland', prize: 0 }, { name: 'Venky', score: 54, captain: 'Haaland', prize: 0 }, { name: 'Arindam', score: 50, captain: 'Haaland', prize: 0 }, { name: 'Shashank', score: 46, captain: 'Semenyo', prize: 0 }, { name: 'Sagar', score: 44, captain: 'Haaland', prize: 0 }, { name: 'Sarjan', score: 42, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Jalaj', score: 37, captain: 'Jo√£o Pedro', prize: 0 }] },
            9: { players: ['Venky', 'Shubs', 'Bharath', 'Sukhpal', 'Gokul', 'Neeraj', 'Sandesh', 'Shashank', 'Sarjan', 'Raghu', 'Mayank', 'Puneet', 'Rounak', 'Aniruddh', 'Arindam', 'Sagar', 'Jalaj'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Shashank', score: 69, captain: 'Mbeumo', prize: 600 }, { name: 'Bharath', score: 68, captain: 'Jo√£o Pedro', prize: 400 }, { name: 'Raghu', score: 67, captain: 'Haaland (WC)', prize: 300 }, { name: 'Sukhpal', score: 61, captain: 'Haaland', prize: 250 }, { name: 'Venky', score: 57, captain: 'Haaland', prize: 50 }, { name: 'Sagar', score: 57, captain: 'Haaland', prize: 50 }, { name: 'Jalaj', score: 57, captain: 'Jo√£o Pedro', prize: 50 }, { name: 'Arindam', score: 48, captain: 'Haaland', prize: 0 }, { name: 'Puneet', score: 45, captain: 'Haaland', prize: 0 }, { name: 'Rounak', score: 44, captain: 'Haaland', prize: 0 }, { name: 'Sandesh', score: 44, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Mayank', score: 43, captain: 'Semenyo', prize: 0 }, { name: 'Neeraj', score: 37, captain: 'Haaland', prize: 0 }, { name: 'Sarjan', score: 37, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Shubs', score: 36, captain: 'Haaland (WC)', prize: 0 }, { name: 'Aniruddh', score: 36, captain: 'Semenyo', prize: 0 }, { name: 'Gokul', score: 31, captain: 'Haaland', prize: 0 }] },
            10: { players: ['Shashank','Bharath','Raghu','Sukhpal','Venky','Sagar','Jalaj','Arindam','Puneet','Rounak','Sandesh','Mayank','Neeraj','Sarjan','Shubs','Aniruddh','Gokul'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Sukhpal', score: 93, captain: 'Haaland', prize: 600 }, { name: 'Neeraj', score: 89, captain: 'Haaland', prize: 400 }, { name: 'Shubs', score: 83, captain: 'Haaland', prize: 300 }, { name: 'Bharath', score: 82, captain: 'Haaland (BB1)', prize: 250 }, { name: 'Sagar', score: 81, captain: 'Haaland (FH1)', prize: 150 }, { name: 'Rounak', score: 78, captain: 'Haaland', prize: 0 }, { name: 'Mayank', score: 73, captain: 'Gabriel', prize: 0 }, { name: 'Gokul', score: 73, captain: 'Haaland', prize: 0 }, { name: 'Puneet', score: 72, captain: 'Haaland', prize: 0 }, { name: 'Raghu', score: 67, captain: 'Haaland', prize: 0 }, { name: 'Shashank', score: 66, captain: 'Mbeumo', prize: 0 }, { name: 'Jalaj', score: 64, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Sandesh', score: 62, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Venky', score: 60, captain: 'Haaland', prize: 0 }, { name: 'Aniruddh', score: 56, captain: 'Haaland', prize: 0 }, { name: 'Arindam', score: 52, captain: 'Haaland', prize: 0 }, { name: 'Sarjan', score: 43, captain: 'Jo√£o Pedro', prize: 0 }] },
            11: { players: ['Shashank','Bharath','Raghu','Sukhpal','Venky','Sagar','Jalaj','Arindam','Puneet','Rounak','Sandesh','Mayank','Neeraj','Sarjan','Shubs','Aniruddh','Gokul'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Aniruddh', score: 49, captain: 'Haaland', prize: 600 }, { name: 'Gokul', score: 48, captain: 'Haaland', prize: 400 }, { name: 'Venky', score: 46, captain: 'Haaland', prize: 300 }, { name: 'Puneet', score: 45, captain: 'Haaland', prize: 250 }, { name: 'Jalaj', score: 43, captain: 'Jo√£o Pedro', prize: 50 }, { name: 'Arindam', score: 43, captain: 'Haaland', prize: 50 }, { name: 'Sarjan', score: 43, captain: 'Jo√£o Pedro', prize: 50 }, { name: 'Sandesh', score: 42, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Shubs', score: 42, captain: 'Gabriel', prize: 0 }, { name: 'Raghu', score: 40, captain: 'Haaland', prize: 0 }, { name: 'Neeraj', score: 39, captain: 'Semenyo', prize: 0 }, { name: 'Sukhpal', score: 38, captain: 'Haaland', prize: 0 }, { name: 'Mayank', score: 36, captain: 'Caicedo', prize: 0 }, { name: 'Bharath', score: 35, captain: 'Enzo', prize: 0 }, { name: 'Shashank', score: 34, captain: 'Caicedo', prize: 0 }, { name: 'Rounak', score: 34, captain: 'Haaland', prize: 0 }, { name: 'Sagar', score: 29, captain: 'Haaland', prize: 0 }] },
            12: { players: ['Shashank','Bharath','Raghu','Sukhpal','Venky','Sagar','Jalaj','Arindam','Puneet','Rounak','Sandesh','Mayank','Neeraj','Sarjan','Shubs','Aniruddh','Gokul'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Shubs', score: 61, captain: 'Haaland', prize: 600 }, { name: 'Bharath', score: 60, captain: 'Haaland', prize: 400 }, { name: 'Raghu', score: 50, captain: 'Haaland', prize: 300 }, { name: 'Rounak', score: 48, captain: 'Haaland (FH1)', prize: 250 }, { name: 'Neeraj', score: 47, captain: 'Haaland', prize: 150 }, { name: 'Gokul', score: 46, captain: 'Haaland', prize: 0 }, { name: 'Sandesh', score: 46, captain: 'Haaland (BB1)', prize: 0 }, { name: 'Sukhpal', score: 45, captain: 'Haaland', prize: 0 }, { name: 'Aniruddh', score: 45, captain: 'Haaland', prize: 0 }, { name: 'Sarjan', score: 39, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Puneet', score: 38, captain: 'Haaland', prize: 0 }, { name: 'Venky', score: 35, captain: 'Haaland (TC1)', prize: 0 }, { name: 'Shashank', score: 34, captain: 'Salah', prize: 0 }, { name: 'Arindam', score: 33, captain: 'Haaland', prize: 0 }, { name: 'Sagar', score: 32, captain: 'Haaland (TC1)', prize: 0 }, { name: 'Mayank', score: 30, captain: 'Mateta', prize: 0 }, { name: 'Jalaj', score: 27, captain: 'Jo√£o Pedro', prize: 0 }] },
            13: { players: ['Shashank','Bharath','Raghu','Sukhpal','Venky','Sagar','Jalaj','Arindam','Puneet','Rounak','Sandesh','Mayank','Neeraj','Sarjan','Shubs','Aniruddh','Gokul'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Mayank', score: 47, captain: 'Haaland', prize: 600 }, { name: 'Raghu', score: 46, captain: 'Haaland', prize: 400 }, { name: 'Arindam', score: 44, captain: 'Haaland', prize: 300 }, { name: 'Sarjan', score: 41, captain: 'Jo√£o Pedro', prize: 250 }, { name: 'Gokul', score: 40, captain: 'Haaland (BB1)', prize: 150 }, { name: 'Rounak', score: 39, captain: 'Haaland (TC1)', prize: 0 }, { name: 'Shubs', score: 37, captain: 'Haaland (TC1)', prize: 0 }, { name: 'Sukhpal', score: 35, captain: 'Haaland', prize: 0 }, { name: 'Puneet', score: 35, captain: 'Haaland', prize: 0 }, { name: 'Venky', score: 30, captain: 'Haaland', prize: 0 }, { name: 'Neeraj', score: 27, captain: 'Haaland', prize: 0 }, { name: 'Sandesh', score: 27, captain: 'Haaland (TC1)', prize: 0 }, { name: 'Aniruddh', score: 23, captain: 'Haaland', prize: 0 }, { name: 'Sagar', score: 21, captain: 'Haaland', prize: 0 }, { name: 'Bharath', score: 20, captain: 'Haaland', prize: 0 }, { name: 'Jalaj', score: 17, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Shashank', score: 14, captain: 'Mbeumo', prize: 0 }] },
            14: { players: ['Shashank','Bharath','Raghu','Sukhpal','Venky','Sagar','Jalaj','Arindam','Puneet','Rounak','Sandesh','Mayank','Neeraj','Sarjan','Shubs','Aniruddh','Gokul'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Gokul', score: 82, captain: 'Haaland', prize: 500 }, { name: 'Rounak', score: 82, captain: 'Haaland', prize: 500 }, { name: 'Shubs', score: 78, captain: 'Haaland', prize: 300 }, { name: 'Raghu', score: 76, captain: 'Haaland', prize: 200 }, { name: 'Neeraj', score: 76, captain: 'Haaland', prize: 200 }, { name: 'Arindam', score: 75, captain: 'Haaland', prize: 0 }, { name: 'Puneet', score: 74, captain: 'Haaland', prize: 0 }, { name: 'Aniruddh', score: 71, captain: 'Haaland', prize: 0 }, { name: 'Sukhpal', score: 68, captain: 'Haaland', prize: 0 }, { name: 'Venky', score: 66, captain: 'Haaland', prize: 0 }, { name: 'Bharath', score: 65, captain: 'Haaland', prize: 0 }, { name: 'Mayank', score: 52, captain: 'Gakpo', prize: 0 }, { name: 'Sandesh', score: 50, captain: 'Haaland', prize: 0 }, { name: 'Sagar', score: 46, captain: 'Haaland', prize: 0 }, { name: 'Sarjan', score: 43, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Shashank', score: 42, captain: 'Mbeumo', prize: 0 }, { name: 'Jalaj', score: 25, captain: 'Jo√£o Pedro', prize: 0 }] },
            15: { players: ['Shashank','Bharath','Raghu','Sukhpal','Venky','Sagar','Jalaj','Arindam','Puneet','Rounak','Sandesh','Mayank','Neeraj','Sarjan','Shubs','Aniruddh','Gokul'], pool: 1700, prizes: [600, 400, 300, 250, 150], results: [{ name: 'Shashank', score: 86, captain: 'Foden', chip: 'TC', prize: 600 }, { name: 'Shubs', score: 74, captain: 'Haaland', chip: 'FH', prize: 400 }, { name: 'Sukhpal', score: 64, captain: 'Haaland', prize: 300 }, { name: 'Puneet', score: 59, captain: 'Haaland', chip: 'WC', prize: 200 }, { name: 'Mayank', score: 59, captain: 'Haaland', chip: 'WC', prize: 200 }, { name: 'Arindam', score: 57, captain: 'Haaland', prize: 0 }, { name: 'Raghu', score: 56, captain: 'Haaland', prize: 0 }, { name: 'Gokul', score: 56, captain: 'Haaland', prize: 0 }, { name: 'Sarjan', score: 56, captain: 'Jo√£o Pedro', prize: 0 }, { name: 'Sandesh', score: 53, captain: 'Mateta', prize: 0 }, { name: 'Bharath', score: 50, captain: 'Haaland', prize: 0 }, { name: 'Rounak', score: 47, captain: 'Haaland', prize: 0 }, { name: 'Jalaj', score: 43, captain: 'Palmer', prize: 0 }, { name: 'Neeraj', score: 39, captain: 'Haaland', prize: 0 }, { name: 'Venky', score: 38, captain: 'Haaland', prize: 0 }, { name: 'Sagar', score: 36, captain: 'Haaland', prize: 0 }, { name: 'Aniruddh', score: 35, captain: 'Haaland', prize: 0 }] },
            16: {
                players: ['Shashank','Bharath','Raghu','Sukhpal','Venky','Sagar','Jalaj','Arindam','Puneet','Rounak','Sandesh','Mayank','Neeraj','Sarjan','Shubs','Aniruddh','Gokul'],
                pool: 1700,
                prizes: [600, 400, 300, 250, 150],
                results: [
                    { name: 'Rounak', score: 104, captain: 'Haaland', chip: 'BB', prize: 600 },
                    { name: 'Neeraj', score: 92, captain: 'Saka', chip: 'FH', prize: 400 },
                    { name: 'Sukhpal', score: 80, captain: 'Haaland', chip: 'WC', prize: 275 },
                    { name: 'Mayank', score: 80, captain: 'Haaland', chip: 'FH', prize: 275 },
                    { name: 'Raghu', score: 75, captain: 'Haaland', prize: 150 },
                    { name: 'Shashank', score: 74, captain: 'B.Fernandes', chip: 'BB', prize: 0 },
                    { name: 'Aniruddh', score: 73, captain: 'Haaland', chip: 'WC', prize: 0 },
                    { name: 'Shubs', score: 71, captain: 'Saka', prize: 0 },
                    { name: 'Arindam', score: 62, captain: 'Haaland', prize: 0 },
                    { name: 'Puneet', score: 61, captain: 'Haaland', prize: 0 },
                    { name: 'Venky', score: 59, captain: 'Haaland', prize: 0 },
                    { name: 'Bharath', score: 58, captain: 'Haaland', prize: 0 },
                    { name: 'Sagar', score: 52, captain: 'Haaland', prize: 0 },
                    { name: 'Gokul', score: 51, captain: 'Thiago', chip: 'WC', prize: 0 },
                    { name: 'Jalaj', score: 51, captain: 'Palmer', prize: 0 },
                    { name: 'Sandesh', score: 50, captain: 'Mateta', prize: 0 },
                    { name: 'Sarjan', score: 39, captain: 'Jo√£o Pedro', prize: 0 }
                ]
            }
        };

        let currentGW = 16;

        function showGW(gw) {
            currentGW = gw;
            document.querySelectorAll('.gw-btn').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) { event.target.classList.add('active'); }
            updateBattle();
        }

        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            if (event && event.target) { event.target.classList.add('active'); }
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            if (tab === 'standings') updateStandings();
            if (tab === 'stats') { updateStats(); updateRivalries(); }
        }

        function getBadges(playerName, data, prevPositions, i) {
            let badges = '';
            if (i === 0 || (data.results[i].score === data.results[0].score)) { badges += '<span class="badge-icon" title="The King: Weekly Winner">üëë</span>'; }
            if (i === data.results.length - 1) { badges += '<span class="badge-icon" title="The Clown: Lowest Score">ü§°</span>'; }
            if (data.results[i].score >= 100) { badges += '<span class="badge-icon" title="Century Club: 100+ Points">üíØ</span>'; }
            
            const lowestPrizeIndex = data.results.findLastIndex(p => p.prize > 0);
            if (lowestPrizeIndex !== -1 && i > lowestPrizeIndex) {
                const prizeCutoff = data.results[lowestPrizeIndex].score;
                if (prizeCutoff - data.results[i].score <= 2) { badges += '<span class="badge-icon" title="Heartbreak: Missed money by <= 2 pts">üïØÔ∏è</span>'; }
            }
            if (data.results[i].prize > 0) {
                 const prevGW = gameData[currentGW - 1];
                 if(prevGW) {
                     const prevResult = prevGW.results.find(p => p.name === playerName);
                     if(prevResult && prevResult.prize > 0) { badges += '<span class="badge-icon" title="Heater: Won in consecutive weeks">üî•</span>'; }
                 }
            }
            return badges;
        }

        function updateBattle() {
            const data = gameData[currentGW];
            const spotlight = generateSpotlight(currentGW);
            document.getElementById('spotlight').innerHTML = spotlight;
            document.getElementById('poolAmount').textContent = data.pool;
            document.getElementById('playerCount').textContent = data.players.length;
            document.getElementById('currentGW').textContent = currentGW;
            
            const medals = ['ü•á', 'ü•à', 'ü•â', 'üéñÔ∏è', 'üèÖ'];
            const prizeHTML = data.prizes.map((prize, i) => `
                <div class="prize"><div class="prize-emoji">${medals[i]}</div><div class="prize-amount">‚Çπ${prize}</div></div>
            `).join('');
            document.getElementById('prizeList').innerHTML = prizeHTML;
            
            const prevGW = gameData[currentGW - 1];
            const prevPositions = {};
            if (prevGW) { prevGW.results.forEach((player, idx) => { prevPositions[player.name] = idx + 1; }); }
            
            const leaderboardHTML = data.results.map((player, i) => {
                const rank = i + 1;
                let rankClass = rank <= 3 ? `rank-${rank}` : (player.prize > 0 ? 'rank-other' : '');
                const medals = ['ü•á', 'ü•à', 'ü•â', '4', '5'];
                let rankDisplay = rank <= 5 && player.prize > 0 ? (medals[rank-1] || rank) : rank;
                let trendArrow = '';
                if (prevPositions[player.name]) {
                    const prevRank = prevPositions[player.name];
                    if (prevRank > rank) { trendArrow = '<span class="trend-indicator trend-up">üìà</span>'; }
                    else if (prevRank < rank) { trendArrow = '<span class="trend-indicator trend-down">üìâ</span>'; }
                    else { trendArrow = '<span class="trend-indicator trend-same">‚û°Ô∏è</span>'; }
                }
                const winnerClass = player.prize > 0 ? 'winner' : '';
                const badges = getBadges(player.name, data, prevPositions, i);
                const chipDisplay = player.chip ? ` <span style="background:#48bb78; color:#fff; padding:2px 6px; border-radius:4px; font-size:0.7em;">${player.chip}</span>` : '';
                
                return `
                    <div class="player-row ${winnerClass}">
                        <div class="rank ${rankClass}">${rankDisplay}</div>
                        <div class="player-info">
                            <div class="player-name">${player.name} ${badges} ${trendArrow}</div>
                            <div class="player-captain">‚ö° ${player.captain}${chipDisplay}</div>
                        </div>
                        <div class="score-prize">
                            <div class="score">${player.score}</div>
                            ${player.prize > 0 ? `<div class="prize-won">+‚Çπ${player.prize}</div>` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            document.getElementById('leaderboard').innerHTML = leaderboardHTML;
            updateBanter(currentGW);
        }
        
        function generateSpotlight(gw) {
            const stories = {
                14: { emoji: 'ü§ù', title: 'Double Trouble at the Top!', story: '<span class="highlight">Gokul</span> and <span class="highlight">Rounak</span> share the crown with 82 points each! <span class="highlight">Raghu</span> and <span class="highlight">Neeraj</span> also split the 4th/5th prize, leaving <span class="highlight">Arindam</span> heartbroken just 1 point away from the cash.' },
                15: { emoji: 'ü§Ø', title: 'Shashank Breaks the Game!', story: 'Just one week after a 14-point disaster, <span class="highlight">Shashank</span> returns with a legendary 86-point Triple Captain haul on Foden. <span class="highlight">Shubs</span> secures 2nd with a Free Hit, while <span class="highlight">Puneet</span> and <span class="highlight">Mayank</span> act as "Wildcard Twins," scoring identical 59s to split the last prize!' },
                16: { emoji: 'üíØ', title: 'The Century Club!', story: '<span class="highlight">Rounak</span> becomes the first manager to break the 100-point barrier (104 pts) with a perfectly timed Bench Boost! <span class="highlight">Neeraj</span> takes silver, while <span class="highlight">Sukhpal</span> and <span class="highlight">Mayank</span> split the bronze. <span class="highlight">Gokul</span> played a Wildcard to score... 51.' }
            };
            const story = stories[gw] || { emoji: 'üéÆ', title: 'The Battle Continues!', story: 'Another spicy gameweek in the books.' };
            return `<div class="spotlight-card"><div class="spotlight-title"><span class="spotlight-emoji">${story.emoji}</span>${story.title}</div><div class="spotlight-story">${story.story}</div></div>`;
        }

        function updateBanter(gw) {
            const data = gameData[gw];
            if (!data) return;
            const results = data.results;
            const lowest = results[results.length - 1];
            const nonPrize = results.filter(p => p.prize === 0);
            let bestNonPrize = null;
            if (nonPrize.length > 0) { bestNonPrize = nonPrize.reduce((best, cur) => (cur.score > best.score ? cur : best), nonPrize[0]); }
            let roastText = '';
            let complimentText = '';
            if (lowest) {
                const meta = managerMeta[lowest.name] || {};
                roastText = `${lowest.name}${meta.nick ? ` (${meta.nick})` : ''} managed just ${lowest.score} points. 39 points in a week where someone scored 104 is a crime.`;
            }
            if (bestNonPrize) {
                const meta = managerMeta[bestNonPrize.name] || {};
                complimentText = `${bestNonPrize.name}${meta.nick ? ` (${meta.nick})` : ''} dropped ${bestNonPrize.score} points‚Äîliterally 1 point away from cash. He needs a hug immediately.`;
            }
            document.getElementById('banter').innerHTML = `<div class="banter-section"><div class="banter-card banter-roast"><div class="banter-title">üî• Roast of the Week</div><div class="banter-text">${roastText}</div></div><div class="banter-card banter-compliment"><div class="banter-title">üíö Clutch with No Cash</div><div class="banter-text">${complimentText}</div></div></div>`;
        }

        function updateStandings() {
            const earnings = {};
            Object.keys(gameData).forEach(gwNum => {
                const gw = gameData[gwNum];
                gw.results.forEach(result => {
                    if (gw.players.includes(result.name)) {
                        if (!earnings[result.name]) { earnings[result.name] = { won: 0, played: 0, currentStreak: 0, topStreak: 0 }; }
                        earnings[result.name].played++;
                        if (result.prize > 0) {
                            earnings[result.name].won += result.prize;
                            earnings[result.name].currentStreak++;
                            earnings[result.name].topStreak = Math.max(earnings[result.name].topStreak, earnings[result.name].currentStreak);
                        } else { earnings[result.name].currentStreak = 0; }
                    }
                });
            });
            const standings = Object.entries(earnings).map(([name, data]) => ({ name, net: data.won - data.played * 100, won: data.won, played: data.played, streak: data.currentStreak, topStreak: data.topStreak })).sort((a, b) => b.net - a.net);
            const standingsHTML = standings.map((player, index) => {
                let badges = '';
                if(player.streak >= 2) badges += '<span class="badge-icon">üî•</span>';
                if(index <= 2) badges += '<span class="badge-icon">üí∞</span>';
                return `<div class="standing-card"><div class="standing-player"><div class="standing-name">${player.name}${badges}</div><div class="standing-stats">üéÆ ${player.played} games | üí∞ ‚Çπ${player.played * 100} entry | Winnings: ‚Çπ${player.won}</div></div><div class="standing-earnings"><div class="net-amount ${player.net >= 0 ? 'positive' : 'negative'}">${player.net >= 0 ? '+' : '-'}‚Çπ${Math.abs(player.net)}</div></div></div>`;
            }).join('');
            document.getElementById('standingsList').innerHTML = standingsHTML;
        }

        function updateStats() {
            const playerStats = {};
            // Re-calc basic stats
            Object.values(gameData).forEach(gw => {
                gw.results.forEach((result, index) => {
                    if (gw.players.includes(result.name)) {
                        if (!playerStats[result.name]) { playerStats[result.name] = { games: 0, wins: 0, podiums: 0, scores: [], positions: [], earnings: 0, prizeCount: 0 }; }
                        const stats = playerStats[result.name];
                        stats.games++;
                        stats.scores.push(result.score);
                        stats.positions.push(index + 1);
                        if (index === 0) stats.wins++;
                        if (index < 3) stats.podiums++;
                        if (result.prize > 0) {
                            stats.earnings += result.prize;
                            stats.prizeCount++;
                        }
                    }
                });
            });
            
            // NOTE: Adjusted filter to games >= 1 to ensure display even if history is incomplete
            const storiesHTML = Object.entries(managerMeta)
                .filter(([name]) => playerStats[name] && playerStats[name].games >= 1)
                .sort((a, b) => {
                    const netA = playerStats[a[0]].earnings - playerStats[a[0]].games * 100;
                    const netB = playerStats[b[0]].earnings - playerStats[b[0]].games * 100;
                    return netB - netA;
                })
                .map(([name, meta]) => {
                    const journey = seasonJourneys[name] || { journey: 'A quiet season so far.', signature: 'Unknown' };
                    const gw16Story = gw16Stories[name] || 'Survived the week.';
                    const aiQuote = aiQuotes[name] || "No comment.";
                    const stats = playerStats[name];
                    const bestRank = Math.min(...stats.positions);
                    const worstRank = Math.max(...stats.positions);
                    
                    // Calculate net logic for pill
                    const net = stats.earnings - (stats.games * 100);
                    const pillClass = net >= 0 ? 'in-profit' : 'in-loss';
                    const pillText = net >= 0 ? `+‚Çπ${net}` : `-‚Çπ${Math.abs(net)}`;

                    return `
                        <div class="player-story-card">
                            <div class="archetype-badge">${meta.archetype}</div>
                            <div class="story-header">
                                <div>
                                    <div class="story-player">${name} <span class="manager-nick">‚Äú${meta.nick}‚Äù</span></div>
                                    <div class="wallet-pill ${pillClass}">${pillText}</div>
                                </div>
                            </div>
                            
                            <div class="story-quote">"${aiQuote}"</div>

                            <div class="story-section">
                                <div class="story-label">‚ö° GW16 Report</div>
                                <div class="story-text">"${gw16Story}"</div>
                            </div>

                            <div class="story-section">
                                <div class="story-label">üìñ Season Arc</div>
                                <div class="story-text">"${journey.journey}"</div>
                            </div>

                            <div class="story-stat-row">
                                <div class="story-stat">üìà Best: ${bestRank}</div>
                                <div class="story-stat">üìâ Worst: ${worstRank}</div>
                                <div class="story-stat">‚≠ê Move: ${journey.signature}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            document.getElementById('playerStories').innerHTML = storiesHTML;
            
            // Lore
            const loreHTML = Object.entries(seasonLore).map(([gw, text]) => {
                return `
                    <div class="lore-entry">
                        <div class="lore-gw">${gw}</div>
                        <div class="lore-text">${text}</div>
                    </div>
                `;
            }).join('');
            document.getElementById('seasonLoreList').innerHTML = loreHTML;

            const entries = Object.entries(playerStats);
            if (!entries.length) return;
            const mostWins = [...entries].sort((a, b) => b[1].wins - a[1].wins)[0];
            const peakPerformance = [...entries].map(([name, stats]) => [name, { ...stats, maxScore: Math.max(...stats.scores) }]).sort((a, b) => b[1].maxScore - a[1].maxScore)[0];
            const mostConsistent = [...entries].filter(([_, s]) => s.games >= 5).map(([name, stats]) => { const avg = stats.positions.reduce((a, b) => a + b, 0) / stats.positions.length; const variance = stats.positions.reduce((sum, pos) => sum + Math.pow(pos - avg, 2), 0) / stats.positions.length; return [name, { ...stats, variance }]; }).sort((a, b) => a[1].variance - b[1].variance)[0];
            const prizeMagnet = [...entries].filter(([_, s]) => s.games >= 5).map(([name, stats]) => { const prizeCount = stats.positions.filter(p => p <= 5).length; return [name, { ...stats, prizeCount }]; }).sort((a, b) => b[1].prizeCount - a[1].prizeCount)[0];
            
            const performanceAwards = [
                { title: 'Season Win Leader', emoji: 'üèÖ', desc: 'Most individual gameweek wins so far.', winner: mostWins },
                { title: 'Peak Performance', emoji: '‚õ∞Ô∏è', desc: 'Highest single-gameweek score in the league.', winner: peakPerformance },
                { title: 'Mr. Reliable', emoji: 'üéØ', desc: 'Most consistent positions across all entries.', winner: mostConsistent },
                { title: 'Prize Magnet', emoji: 'üéñÔ∏è', desc: 'Most frequent top-5 appearances.', winner: prizeMagnet }
            ];
            
            const generousDonor = [...entries].filter(([_, s]) => s.earnings === 0 && s.games >= 5).sort((a, b) => b[1].games - a[1].games)[0];
            const resurrection = [...entries].filter(([_, s]) => s.games >= 6).map(([name, stats]) => { const worst = Math.max(...stats.positions); const worstIndex = stats.positions.lastIndexOf(worst); if (worstIndex >= stats.positions.length - 2) { return [name, { ...stats, score: 0 }]; } const afterWorst = stats.positions.slice(worstIndex + 1); const improvement = worst - (afterWorst.reduce((a, b) => a + b, 0) / afterWorst.length); return [name, { ...stats, score: improvement }]; }).sort((a, b) => b[1].score - a[1].score)[0];
            const lateBloomer = [...entries].filter(([_, s]) => s.games >= 5).map(([name, stats]) => { const firstHalf = stats.positions.slice(0, Math.floor(stats.games / 2)); const secondHalf = stats.positions.slice(Math.floor(stats.games / 2)); const improvement = (firstHalf.reduce((a, b) => a + b, 0) / firstHalf.length) - (secondHalf.reduce((a, b) => a + b, 0) / secondHalf.length); return [name, { ...stats, improvement }]; }).sort((a, b) => b[1].improvement - a[1].improvement)[0];
            
            const funAwards = [
                { title: 'Phoenix Rising', emoji: 'üî•', desc: 'Biggest comeback after a disaster week.', winner: resurrection },
                { title: 'Late Bloomer', emoji: 'üå±', desc: 'Started slow, heating up over time.', winner: lateBloomer },
                { title: 'Generous Donor', emoji: 'üí∏', desc: 'Most entries with no winnings so far.', winner: generousDonor }
            ];
            
            const performanceHTML = performanceAwards.filter(a => a.winner && a.winner[1]).map(award => `<div class="award"><div class="award-info"><div class="award-title">${award.emoji} ${award.title}</div><div class="award-desc">${award.desc}</div></div><div class="award-winner">${award.winner[0]}</div></div>`).join('');
            const funHTML = funAwards.filter(a => a.winner && a.winner[1]).map(award => `<div class="award"><div class="award-info"><div class="award-title">${award.emoji} ${award.title}</div><div class="award-desc">${award.desc}</div></div><div class="award-winner">${award.winner[0]}</div></div>`).join('');
            document.getElementById('performanceAwards').innerHTML = performanceHTML;
            document.getElementById('funAwards').innerHTML = funHTML;
        }

        function updateRivalries() {
            // Helper: Get Net Earnings for a player
            function getNet(player) {
                let played = 0, won = 0;
                Object.values(gameData).forEach(gw => {
                    const res = gw.results.find(r => r.name === player);
                    if(res) { played++; won += res.prize; }
                });
                return won - (played * 100);
            }

            const players = Object.keys(managerMeta);
            
            // 1. Dynamic: Neck-and-Neck (Smallest gap in Net Earnings)
            const netScores = players.map(p => ({ name: p, net: getNet(p) })).sort((a, b) => b.net - a.net);
            let p1 = netScores[0], p2 = netScores[1], minDiff = Infinity;
            
            // Find closest pair that isn't just 0 vs 0
            for(let i=0; i<netScores.length-1; i++) {
                const diff = Math.abs(netScores[i].net - netScores[i+1].net);
                if(diff < minDiff && (netScores[i].net !== 0 || netScores[i+1].net !== 0)) {
                    minDiff = diff;
                    p1 = netScores[i];
                    p2 = netScores[i+1];
                }
            }

            // 2. Dynamic: The Massacre (Biggest score diff this week)
            const currentResults = gameData[currentGW].results;
            const topScore = currentResults[0];
            const lowScore = currentResults[currentResults.length-1];
            const scoreDiff = topScore.score - lowScore.score;

            // 3. The Gatekeeper (5th place vs 6th place)
            const prize5 = currentResults.find((r, i) => i === 4); // 5th place
            const noPrize6 = currentResults.find((r, i) => i === 5); // 6th place
            const gateDiff = prize5.score - noPrize6.score;

            const rivalryHTML = `
                <div class="rivalry-card">
                    <div class="rivalry-header">‚ö° The Neck-and-Neck (Net Earnings)</div>
                    <div class="rivalry-names">
                        <span>${p1.name} (‚Çπ${p1.net})</span>
                        <span class="rivalry-vs">vs</span>
                        <span>${p2.name} (‚Çπ${p2.net})</span>
                    </div>
                    <div class="rivalry-stat">Gap: Only ‚Çπ${minDiff}! One gameweek flips this.</div>
                </div>

                <div class="rivalry-card">
                    <div class="rivalry-header">üíÄ The Massacre (GW${currentGW})</div>
                    <div class="rivalry-names">
                        <span>${topScore.name} (${topScore.score}pts)</span>
                        <span class="rivalry-vs">crushed</span>
                        <span>${lowScore.name} (${lowScore.score}pts)</span>
                    </div>
                    <div class="rivalry-stat">Gap: ${scoreDiff} points. A complete demolition job.</div>
                </div>

                <div class="rivalry-card">
                    <div class="rivalry-header">üö™ The Gatekeeper (Prize vs No Prize)</div>
                    <div class="rivalry-names">
                        <span>${prize5.name} (${prize5.score}pts)</span>
                        <span class="rivalry-vs">denied</span>
                        <span>${noPrize6.name} (${noPrize6.score}pts)</span>
                    </div>
                    <div class="rivalry-stat">Gap: ${gateDiff} point(s). ${noPrize6.name} will be losing sleep over this.</div>
                </div>
            `;
            document.getElementById('rivalries').innerHTML = rivalryHTML;
        }

        updateBattle();
    </script>
</body>
</html>
